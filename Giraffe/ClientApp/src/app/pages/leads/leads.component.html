<!--Lead Main Panel-->
<div class="row">
  <div class="col-12">
    <div class="card">
      <div class="card-header">
        <h5 class="mb-0">Leads center</h5>
      </div>
      <div class="card-body bg-light">
        <div class="row">
          <div class="col-12">
            <ul class="nav nav-pills" id="pill-myTab" role="tablist">
              <li class="nav-item">
                <a class="nav-link" [class.active]="tabid==1" id="pill-tab-1" (click)="changeTab(1)"
                   data-toggle="tab" href="#pill-tab-1" role="tab"
                   aria-controls="pill-tab-1" aria-selected="true">
                  List
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-danger font-weight-bold" [class.active]="tabid==2" (click)="changeTab(2)"
                   id="pill-tab-2" data-toggle="tab" href="#pill-tab-2"
                   role="tab" aria-controls="pill-tab-2"
                   aria-selected="true">
                  Special ({{needCareCount}})
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" id="pill-tab-3" [class.active]="tabid==3" (click)="changeTab(3)"
                   data-toggle="tab" href="#pill-tab-3" role="tab"
                   aria-controls="pill-tab-3" aria-selected="false">
                  Activities
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" id="pill-tab-4" [class.active]="tabid==4" (click)="changeTab(4)"
                   data-toggle="tab" href="#pill-tab-4" role="tab"
                   aria-controls="pill-tab-4" aria-selected="false">Calendar</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" id="pill-tab-5" [class.active]="tabid==5" (click)="changeTab(5)"
                   data-toggle="tab" href="#pill-tab-5" role="tab"
                   aria-controls="pill-tab-5"
                   aria-selected="false">Proposals</a>
              </li>
              <!-- <li class="nav-item"><a class="nav-link" id="pill-map-tab" data-toggle="tab"
              href="#pill-tab-map" role="tab" aria-controls="pill-tab-map"
              aria-selected="false">Map</a></li> -->
              <!--<li class="nav-item">
                <a class="nav-link" id="pill-tab-7" [class.active]="tabid==7" (click)="changeTab(7)"
                   data-toggle="tab" href="#pill-tab-7" role="tab"
                   aria-controls="pill-tab-7" aria-selected="false">Logs</a>
              </li>-->
            </ul>
            <div class="tab-content border mt-3" id="pill-myTabContent">
              <div class="tab-pane fade" [class.show]="tabid==1" [class.active]="tabid==1" id="pill-tab-1"
                   role="tabpanel" aria-labelledby="list-view-tab">
                <div class="card shadow-none">
                  <div [style.opacity]="loading ? '0' : '1'">
                    <div class="card-header">
                      <div class="row align-items-center justify-content-between">
                        <div class="col-3 col-sm-auto d-flex align-items-center mr-0">
                          <div id="DataTables_Table_1_filter"
                               class="dataTables_filter d-sm-inline-block">
                            <input type="search" class="form-control" placeholder="Search" [(ngModel)]="searchLead" appTrimLeft>
                          </div>
                        </div>
                        <!--<div class="col-4 d-flex align-items-center mr-0 pl-0">
                          <label class="d-inline-block mt-2">My filters</label>
                          <select class="form-control ml-3 d-inline-block w-50" id="defaultFiter" [(ngModel)]="defaultFiter" (change)="chooseSavedFilters()">
                            <option [ngValue]="0">All</option>
                          </select>
                        </div>-->
                        <div class="col-5 col-sm-auto ml-auto text-right pl-0">
                          <div class="d-none" id="orders-actions">
                            <div class="input-group input-group-sm">
                              <select class="custom-select cus"
                                      aria-label="Bulk actions">
                                <option selected="">Bulk actions</option>
                                <option value="Refund">Refund</option>
                                <option value="Delete">Delete</option>
                              </select>
                              <button class="btn btn-falcon-default ml-2"
                                      type="button">
                                Apply
                              </button>
                            </div>
                          </div>
                          <div id="dashboard-actions">
                            <div class="btn-group" [hidden]="checkedList?.length==0">
                              <button class="btn dropdown-toggle btn-info mx-2" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <span class="fas fa-bars pt-1"></span>
                                <span class="d-none d-sm-inline-block">Actions</span>
                              </button>
                              <div class="dropdown-menu dropdown-edit">
                                <a class="dropdown-item" href="javascript:void(0)" (click)="bulkActions('listviewToNeedcare')">Mark as Special</a>
                                <hr class="hr-padding" />
                                <a class="dropdown-item text-danger" href="javascript:void(0)" (click)="modalDelete(0,'','',['listviewStatus'],'')">Delete</a>
                              </div>
                            </div>
                            <div class="btn-group" [hidden]="checkedList?.length > 0">
                              <button class="btn btn-success rounded"
                                      data-toggle="modal" data-target="#exampleModal"
                                      type="button" (click)="editLead(0,'listview')">
                                <span class="fas fa-plus"
                                      data-fa-transform="shrink-3 down-2"></span>
                                <span class="d-none d-lg-inline-block">
                                  New Lead
                                </span>
                              </button>
                              <button class="btn rounded ml-2"
                                      type="button" data-toggle="modal" (click)="filterOption('Lead')" [ngClass]="leadFilteredBgOpe==1 ? 'btn-primary' : 'btn-falcon-default' ">
                                <span class="fas fa-filter"
                                      data-fa-transform="shrink-3 down-2"></span>
                                <!--(click)="modalOperation('modalLeadFilter','')"-->
                                <span class="d-none d-lg-inline-block">
                                  Filter
                                </span>
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="card-body pt-0">
                      <div class="row">
                        <div class="col-12">
                          <div class="falcon-data-table table-responsive">
                            <table class="table table-sm table-dashboard data-table fs--1 border-bottom">
                              <thead class="bg-200">
                                <tr>
                                  <th class="pr-1 align-middle">
                                    <div class="custom-control custom-checkbox">
                                      <input class="custom-control-input" id="listviewBulk" type="checkbox" [(ngModel)]="masterSelected" (change)="checkUncheckAll(listviewconfig.currentPage,listviewconfig.itemsPerPage)" [disabled]="leadData?.length==0">
                                      <label class="custom-control-label" for="listviewBulk"></label>
                                    </div>
                                  </th>
                                  <th class="pr-1 align-middle cursor-pointer min-w-50px">
                                  </th>
                                  <th class="pr-1 align-middle cursor-pointer min-w-200px" (click)="sortType = 'title'; sortReverse = !sortReverse">
                                    Opportunity Title
                                    <span *ngIf="sortType == 'title' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'title' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'title'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="pr-1 align-middle cursor-pointer  min-w-150px" (click)="sortType = 'date'; sortReverse = !sortReverse">
                                    Date
                                    <span *ngIf="sortType == 'date' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'date' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'date'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="pr-1 align-middle cursor-pointer min-w-100px" (click)="sortType = 'owner'; sortReverse = !sortReverse">
                                    Owner
                                    <span *ngIf="sortType == 'owner' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'owner' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'owner'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="pr-1 align-middle cursor-pointer min-w-150px" (click)="sortType = 'customer'; sortReverse = !sortReverse">
                                    Customer
                                    <span *ngIf="sortType == 'customer' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'customer' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'customer'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="pr-1 align-middle text-center cursor-pointer min-w-100px" (click)="sortType = 'status'; sortReverse = !sortReverse">
                                    Status
                                    <span *ngIf="sortType == 'status' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'status' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'status'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="pr-1 align-middle text-right cursor-pointer min-w-100px" (click)="sortType = 'createDate'; sortReverse = !sortReverse">
                                    Age
                                    <span *ngIf="sortType == 'createDate' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'createDate' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'createDate'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="pr-1 align-middle text-right cursor-pointer min-w-100px" (click)="sortType = 'rate'; sortReverse = !sortReverse">
                                    Rate
                                    <span *ngIf="sortType == 'rate' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'rate' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'rate'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="pr-1 align-middle text-center cursor-pointer min-w-150px" (click)="sortType = 'projectType'; sortReverse = !sortReverse">
                                    Project Type
                                    <span *ngIf="sortType == 'projectType' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'projectType' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'projectType'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="pr-1 align-middle text-center cursor-pointer min-w-150px" (click)="sortType = 'revenue'; sortReverse = !sortReverse">
                                    Est. Sale Revenue
                                    <span *ngIf="sortType == 'revenue' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'revenue' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'revenue'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="pr-1 align-middle text-center cursor-pointer min-w-150px" (click)="sortType = 'lastContacted'; sortReverse = !sortReverse">
                                    Last Contacted
                                    <span *ngIf="sortType == 'lastContacted' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'lastContacted' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'lastContacted'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="pr-1 align-middle text-center cursor-pointer min-w-150px" (click)="sortType = 'sourceName'; sortReverse = !sortReverse">
                                    Lead Source
                                    <span *ngIf="sortType == 'sourceName' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'sourceName' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'sourceName'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="pr-1 align-middle">
                                  </th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr class="btn-reveal-trigger" *ngFor="let ld of leadData|filter: searchLead | orderBy:sortType:sortReverse | paginate: listviewconfig">
                                  <td class="align-middle">
                                    <div class="custom-control custom-checkbox">
                                      <input class="custom-control-input" type="checkbox" id="lv{{ld.id}}" [(ngModel)]="ld.checkboxOpe" (change)="isAllSelected()" />
                                      <label class="custom-control-label" for="lv{{ld.id}}"></label>
                                    </div>
                                  </td>
                                  <th class="align-middle">
                                    <div *ngIf="ld.newIconOpe">
                                      <span class="{{ld.newIconOpe}}">new</span>
                                    </div>
                                  </th>
                                  <th class="align-middle">
                                    <a href="javascript:void(0)" (click)="editLead(ld.id,'listview')">
                                      {{ld.title}}
                                    </a>
                                  </th>
                                  <td class="align-middle">
                                    {{ld.date}}
                                  </td>
                                  <td class="align-middle">
                                    <a>
                                      <div class="media d-flex align-items-center">
                                        <div class="avatar avatar-xl mr-2">
                                          <img class="rounded-circle" src="{{ld.ownerImage}}" alt="" data-toggle="tooltip" data-placement="top" title="{{ld.owner}}" *ngIf="ld.ownerId!=0">
                                        </div>
                                      </div>
                                    </a>
                                  </td>
                                  <td class="align-middle">
                                    {{ld.customer}}
                                  </td>
                                  <td class="align-middle text-center fs-0">
                                    <span class="badge badge rounded-capsule badge-soft-{{ld.statusColor}}">
                                      {{ld.status}}
                                    </span>
                                  </td>
                                  <td class="align-middle text-right">
                                    {{ld.age}}
                                  </td>
                                  <td class="align-middle text-right">
                                    {{ld.rate}}
                                  </td>
                                  <td class="align-middle text-center">
                                    {{ld.projectType}}
                                  </td>
                                  <td class="align-middle text-center">
                                    ${{ld.revenue}}
                                  </td>
                                  <td class="align-middle text-center">
                                    {{ld.lastContacted}}
                                  </td>
                                  <td class="align-middle text-center">
                                    {{ld.sourceName}}
                                  </td>
                                  <td class="align-middle white-space-nowrap">
                                    <div class="dropdown text-sans-serif">
                                      <button class="btn btn-link text-600 btn-sm dropdown-toggle btn-reveal mr-3"
                                              type="button" id="dropdown0"
                                              data-toggle="dropdown"
                                              data-boundary="html"
                                              aria-haspopup="true"
                                              aria-expanded="false">
                                        <span class="fas fa-ellipsis-h fs--1"></span>
                                      </button>
                                      <div class="dropdown-menu dropdown-menu-right border py-0"
                                           aria-labelledby="dropdown0">
                                        <div class="bg-white py-2">
                                          <a class="dropdown-item cursor-pointer" (click)="editLead(ld.id,'listview')">View / Edit</a>
                                          <div class="dropdown-divider"></div>
                                          <a class="dropdown-item text-warning" href="javascript:void(0)" (click)="changeStatus('leadCare', ld.id, 1)">Mark as Special</a>
                                          <a class="dropdown-item text-danger" href="javascript:void(0)" (click)="modalDelete(ld.id,'lead','',[],'')">Delete</a>
                                        </div>
                                      </div>
                                    </div>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                            <table *ngIf="leadData?.length==0" class="w-100 text-center">
                              <tr>
                                <td colspan="14" class="p-2">
                                  <p class="text-center bold-text font-size18px m-0">No data available</p>
                                  <p class="text-center m-0 text-gray font-size13px">There is not data to show you right now</p>
                                </td>
                              </tr>
                            </table>
                            <pagination-template #p="paginationApi" [id]="listviewconfig.id" maxSize="5" (pageChange)="listviewconfig.currentPage = $event" (pageBoundsCorrection)="listviewconfig.currentPage = $event">
                              <div *ngIf="p.pages?.length > 0" class="row mx-1 align-items-center justify-content-center justify-content-md-between">
                                <div class="col-auto mb-2 mb-sm-0">
                                  <div class="dataTables_info">Showing {{((p.getCurrent()-1)*listviewconfig.itemsPerPage)+1}} to {{(p.getCurrent()*listviewconfig.itemsPerPage) < p.getTotalItems() ? (p.getCurrent()*listviewconfig.itemsPerPage) : p.getTotalItems()}} of {{p.getTotalItems()}} entries</div>
                                </div>
                                <div class="col-auto">
                                  <div class="dataTables_paginate paging_simple_numbers pt-3">
                                    <ul class="pagination pagination-sm">
                                      <li class="paginate_button page-item previous" [class.disabled]="p.isFirstPage()">
                                        <a class="page-link" (click)="p.previous()"> < </a>
                                      </li>
                                      <li class="paginate_button page-item" *ngFor="let page of p.pages" [class.active]="p.getCurrent() === page.value">
                                        <a class="page-link" (click)="p.setCurrent(page.value);masterSelectedRefresh('listviewBulk')" *ngIf="p.getCurrent() !== page.value">{{ page.label }}</a>
                                        <a class="page-link" *ngIf="p.getCurrent() === page.value">{{ page.label }}</a>
                                      </li>
                                      <li class="paginate_button page-item next" [class.disabled]="p.isLastPage()">
                                        <a class="page-link" (click)="p.next()"> > </a>
                                      </li>
                                    </ul>
                                  </div>
                                </div>
                              </div>
                            </pagination-template>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <ngx-loading [show]="loading" class="z-index1000"></ngx-loading>
                </div>
              </div>
              <div class="tab-pane fade" id="pill-tab-2" [class.show]="tabid==2" [class.active]="tabid==2" role="tabpanel"
                   aria-labelledby="need-care-tab">
                <div class="card shadow-none">
                  <div [style.opacity]="loading ? '0' : '1'">
                    <div class="card-header">
                      <div class="row align-items-center justify-content-between">
                        <div class="col-6 col-sm-auto d-flex align-items-center mr-0">
                          <div id="DataTables_Table_0_filter"
                               class="dataTables_filter d-sm-inline-block">
                            <input type="search" class="form-control" placeholder="Search" [(ngModel)]="searchLead">
                          </div>
                        </div>
                        <div class="col-6 col-sm-auto ml-auto text-right pl-0">
                          <div id="dashboard-actions">
                            <div class="btn-group" [hidden]="checkedList?.length==0">
                              <button class="btn dropdown-toggle btn-info mx-2" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <span class="fas fa-bars pt-1"></span>
                                <span class="d-none d-sm-inline-block">Actions</span>
                              </button>
                              <div class="dropdown-menu dropdown-edit">
                                <a class="dropdown-item" href="javascript:void(0)" (click)="bulkActions('needcareToListview')">Remove from Special</a>
                                <hr class="hr-padding" />
                                <a class="dropdown-item text-danger" href="javascript:void(0)" (click)="modalDelete(0,'','',['needcareStatus'],'')">Delete</a>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="card-body pt-0">
                      <div class="row">
                        <div class="col-12">
                          <div class="falcon-data-table table-responsive">
                            <table class="table table-sm table-dashboard data-table fs--1 border-bottom">
                              <thead class="bg-200">
                                <tr>
                                  <th class="pr-1 align-middle">
                                    <div class="custom-control custom-checkbox">
                                      <input class="custom-control-input" id="needcareBulk" type="checkbox" [(ngModel)]="masterSelected" (change)="checkUncheckAll(needcareconfig.currentPage,needcareconfig.itemsPerPage)" [disabled]="leadData?.length==0">
                                      <label class="custom-control-label" for="needcareBulk"></label>
                                    </div>
                                  </th>
                                  <th class="pr-1 align-middle cursor-pointer min-w-50px">
                                  </th>
                                  <th class="pr-1 align-middle cursor-pointer min-w-200px" (click)="sortType = 'title'; sortReverse = !sortReverse">
                                    Opportunity Title
                                    <span *ngIf="sortType == 'title' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'title' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'title'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="pr-1 align-middle cursor-pointer min-w-150px" (click)="sortType = 'date'; sortReverse = !sortReverse">
                                    Date
                                    <span *ngIf="sortType == 'date' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'date' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'date'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="pr-1 align-middle cursor-pointer min-w-100px" (click)="sortType = 'owner'; sortReverse = !sortReverse">
                                    Owner
                                    <span *ngIf="sortType == 'owner' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'owner' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'owner'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="pr-1 align-middle cursor-pointer min-w-150px" (click)="sortType = 'customer'; sortReverse = !sortReverse">
                                    Customer
                                    <span *ngIf="sortType == 'customer' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'customer' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'customer'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="pr-1 align-middle text-center cursor-pointer min-w-100px" (click)="sortType = 'status'; sortReverse = !sortReverse">
                                    Status
                                    <span *ngIf="sortType == 'status' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'status' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'status'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="pr-1 align-middle text-right cursor-pointer min-w-100px" (click)="sortType = 'createDate'; sortReverse = !sortReverse">
                                    Age
                                    <span *ngIf="sortType == 'createDate' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'createDate' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'createDate'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="pr-1 align-middle text-right cursor-pointer min-w-100px" (click)="sortType = 'rate'; sortReverse = !sortReverse">
                                    Rate
                                    <span *ngIf="sortType == 'rate' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'rate' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'rate'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="pr-1 align-middle text-center cursor-pointer min-w-150px" (click)="sortType = 'projectType'; sortReverse = !sortReverse">
                                    Project Type
                                    <span *ngIf="sortType == 'projectType' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'projectType' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'projectType'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>


                                  <th class="pr-1 align-middle text-center cursor-pointer min-w-150px" (click)="sortType = 'revenue'; sortReverse = !sortReverse">
                                    Est. Sale Revenue
                                    <span *ngIf="sortType == 'revenue' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'revenue' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'revenue'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>

                                  <th class="pr-1 align-middle text-center cursor-pointer min-w-150px" (click)="sortType = 'lastContacted'; sortReverse = !sortReverse">
                                    Last Contacted
                                    <span *ngIf="sortType == 'lastContacted' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'lastContacted' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'lastContacted'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>

                                  <th class="pr-1 align-middle text-center cursor-pointer min-w-150px" (click)="sortType = 'sourceName'; sortReverse = !sortReverse">
                                    Lead Source
                                    <span *ngIf="sortType == 'sourceName' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'sourceName' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'sourceName'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>



                                  <th class="pr-1 align-middle">
                                  </th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr class="btn-reveal-trigger" *ngFor="let ld of leadData|filter: searchLead | orderBy:sortType:sortReverse | paginate: needcareconfig">
                                  <td class="align-middle">
                                    <div class="custom-control custom-checkbox">
                                      <input class="custom-control-input" type="checkbox" id="nd{{ld.id}}" [(ngModel)]="ld.checkboxOpe" (change)="isAllSelected()" />
                                      <label class="custom-control-label" for="nd{{ld.id}}"></label>
                                    </div>
                                  </td>
                                  <th class="align-middle">
                                    <div *ngIf="ld.newIconOpe">
                                      <span class="{{ld.newIconOpe}}">new</span>
                                    </div>
                                  </th>
                                  <th class="align-middle">
                                    <a href="javascript:void(0)" (click)="editLead(ld.id,'needcare')">
                                      {{ld.title}}
                                    </a>
                                  </th>
                                  <td class="align-middle">
                                    {{ld.date}}
                                  </td>
                                  <td class="align-middle">
                                    <a>
                                      <div class="media d-flex align-items-center">
                                        <div class="avatar avatar-xl mr-2">
                                          <img class="rounded-circle" src="{{ld.ownerImage}}" alt="" data-toggle="tooltip" data-placement="top" title="{{ld.owner}}" *ngIf="ld.ownerId!=0">
                                        </div>
                                      </div>
                                    </a>
                                  </td>
                                  <td class="align-middle">
                                    {{ld.customer}}
                                  </td>
                                  <td class="align-middle text-center fs-0">
                                    <span class="badge badge rounded-capsule badge-soft-{{ld.statusColor}}">
                                      {{ld.status}}
                                    </span>
                                  </td>
                                  <td class="align-middle text-right">
                                    {{ld.age}}
                                  </td>
                                  <td class="align-middle text-right">
                                    {{ld.rate}}
                                  </td>
                                  <td class="align-middle text-center">
                                    {{ld.projectType}}
                                  </td>
                                  <td class="align-middle text-center">
                                    ${{ld.revenue}}
                                  </td>
                                  <td class="align-middle text-center">
                                    {{ld.lastContacted}}
                                  </td>
                                  <td class="align-middle text-center">
                                    {{ld.sourceName}}
                                  </td>

                                  <td class="align-middle white-space-nowrap">
                                    <div class="dropdown text-sans-serif">
                                      <button class="btn btn-link text-600 btn-sm dropdown-toggle btn-reveal mr-3"
                                              type="button" id="dropdown0"
                                              data-toggle="dropdown"
                                              data-boundary="html"
                                              aria-haspopup="true"
                                              aria-expanded="false">
                                        <span class="fas fa-ellipsis-h fs--1"></span>
                                      </button>
                                      <div class="dropdown-menu dropdown-menu-right border py-0"
                                           aria-labelledby="dropdown0">
                                        <div class="bg-white py-2">
                                          <a class="dropdown-item cursor-pointer" (click)="editLead(ld.id,'needcare')">View / Edit</a>
                                          <div class="dropdown-divider"></div>
                                          <a class="dropdown-item text-warning" href="javascript:void(0)" (click)="changeStatus('leadCare', ld.id, 0)">Remove from Special</a>
                                          <a class="dropdown-item text-danger" href="javascript:void(0)" (click)="modalDelete(ld.id,'lead','',[],'')">Delete</a>
                                          <!--(click)="changeStatus('lead', ld.id, -1)"-->
                                        </div>
                                      </div>
                                    </div>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                            <table *ngIf="leadData?.length==0" class="w-100 text-center">
                              <tr>
                                <td colspan="14" class="p-2">
                                  <p class="text-center bold-text font-size18px m-0">No data available</p>
                                  <p class="text-center m-0 text-gray font-size13px">There is not data to show you right now</p>
                                </td>
                              </tr>
                            </table>
                            <pagination-template #p2="paginationApi" [id]="needcareconfig.id" maxSize="5" (pageChange)="needcareconfig.currentPage = $event" (pageBoundsCorrection)="needcareconfig.currentPage = $event">
                              <div *ngIf="p2.pages?.length > 0" class="row mx-1 align-items-center justify-content-center justify-content-md-between">
                                <div class="col-auto mb-2 mb-sm-0">
                                  <div class="dataTables_info">Showing {{((p2.getCurrent()-1)*needcareconfig.itemsPerPage)+1}} to {{(p2.getCurrent()*needcareconfig.itemsPerPage) < p2.getTotalItems() ? (p2.getCurrent()*needcareconfig.itemsPerPage) : p2.getTotalItems()}} of {{p2.getTotalItems()}} entries</div>
                                </div>
                                <div class="col-auto">
                                  <div class="dataTables_paginate paging_simple_numbers pt-3">
                                    <ul class="pagination pagination-sm">
                                      <li class="paginate_button page-item previous" [class.disabled]="p2.isFirstPage()">
                                        <a class="page-link" (click)="p2.previous()"> < </a>
                                      </li>
                                      <li class="paginate_button page-item" *ngFor="let page of p2.pages" [class.active]="p2.getCurrent() === page.value">
                                        <a class="page-link" (click)="p2.setCurrent(page.value);masterSelectedRefresh('needcareBulk')" *ngIf="p2.getCurrent() !== page.value">{{ page.label }}</a>
                                        <a class="page-link" *ngIf="p2.getCurrent() === page.value">{{ page.label }}</a>
                                      </li>
                                      <li class="paginate_button page-item next" [class.disabled]="p2.isLastPage()">
                                        <a class="page-link" (click)="p2.next()"> > </a>
                                      </li>
                                    </ul>
                                  </div>
                                </div>
                              </div>
                            </pagination-template>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <ngx-loading [show]="loading" class="z-index1000"></ngx-loading>
                </div>
              </div>
              <div class="tab-pane fade" id="pill-tab-3" [class.show]="tabid==3" [class.active]="tabid==3" role="tabpanel"
                   aria-labelledby="view-tab">
                <div class="card shadow-none">
                  <div [style.opacity]="loading ? '0' : '1'">
                    <div class="card-header">
                      <div class="row align-items-center justify-content-between">
                        <div class="col-6 col-sm-auto d-flex align-items-center mr-0">
                          <div id="DataTables_Table_0_filter"
                               class="dataTables_filter d-sm-inline-block">
                            <input type="search" class="form-control" placeholder="Search" [(ngModel)]="searchLead">
                          </div>
                        </div>
                        <div class="col-6 col-sm-auto ml-auto text-right pl-0">
                          <div class="d-none" id="orders-actions">
                            <div class="input-group input-group-sm">
                              <select class="custom-select cus"
                                      aria-label="Bulk actions">
                                <option selected="">Bulk actions</option>
                                <option value="Refund">Refund</option>
                                <option value="Delete">Delete</option>
                              </select>
                              <button class="btn btn-falcon-default btn-sm ml-2"
                                      type="button">
                                Apply
                              </button>
                            </div>
                          </div>
                          <div id="dashboard-actions">
                            <div class="btn-group" [hidden]="checkedList?.length==0">
                              <button class="btn dropdown-toggle btn-info mx-2" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <span class="fas fa-bars pt-1"></span>
                                <span class="d-none d-sm-inline-block">Actions</span>
                              </button>
                              <div class="dropdown-menu dropdown-edit">
                                <a class="dropdown-item" href="javascript:void(0)" (click)="bulkActions('activityListCompleted')">Complete</a>
                                <hr class="hr-padding" />
                                <a class="dropdown-item text-danger" href="javascript:void(0)" (click)="modalDelete(0,'','',['activityListStatus'],'')">Delete</a>
                              </div>
                            </div>
                            <div class="btn-group" [hidden]="checkedList?.length > 0">
                              <button class="btn  btn-success" (click)="newLeadSearch(1,'activityList')" type="button">
                                <span class="fas fa-plus"
                                      data-fa-transform="shrink-3 down-2"></span>
                                <span class="d-none d-sm-inline-block">
                                  New Activity
                                </span>
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="card-body pt-0">
                      <div class="row">
                        <div class="col-12">
                          <div class="falcon-data-table table-responsive">
                            <table class="table table-sm table-dashboard fs--1 data-table border-bottom">
                              <thead class="bg-200">
                                <tr>
                                  <th class="no-sort pr-1 align-middle data-table-row-bulk-select">
                                    <div class="custom-control custom-checkbox">
                                      <input class="custom-control-input" id="lActivityBulk" type="checkbox" [(ngModel)]="masterSelected" (change)="checkUncheckAll(activityConfig.currentPage,activityConfig.itemsPerPage)" [disabled]="leadData?.length==0">
                                      <label class="custom-control-label" for="lActivityBulk"></label>
                                    </div>
                                  </th>
                                  <th class="sort pr-1 align-middle text-left cursor-pointer min-w-200px" (click)="sortType = 'activityType'; sortReverse = !sortReverse">
                                    Type
                                    <span *ngIf="sortType == 'activityType' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'activityType' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'activityType'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="sort pr-1 align-middle text-center cursor-pointer min-w-150px" (click)="sortType = 'leadTitle'; sortReverse = !sortReverse">
                                    Opportunity Title
                                    <span *ngIf="sortType == 'leadTitle' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'leadTitle' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'leadTitle'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="sort pr-1 align-middle text-center cursor-pointer min-w-100px" (click)="sortType = 'begDateOrderBy'; sortReverse = !sortReverse">
                                    Start date
                                    <span *ngIf="sortType == 'begDateOrderBy' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'begDateOrderBy' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'begDateOrderBy'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="sort pr-1 align-middle text-center cursor-pointer min-w-100px" (click)="sortType = 'begTime'; sortReverse = !sortReverse">
                                    Time
                                    <span *ngIf="sortType == 'begTime' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'begTime' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'begTime'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="sort pr-1 align-middle text-center cursor-pointer min-w-100px" (click)="sortType = 'duration'; sortReverse = !sortReverse">
                                    Duration
                                    <span *ngIf="sortType == 'duration' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'duration' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'duration'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="sort pr-1 align-middle text-center cursor-pointer min-w-100px" (click)="sortType = 'assigner'; sortReverse = !sortReverse">
                                    Assignee
                                    <span *ngIf="sortType == 'assigner' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'assigner' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'assigner'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="sort pr-1 align-middle text-center cursor-pointer min-w-100px" (click)="sortType = 'status'; sortReverse = !sortReverse">
                                    Status
                                    <span *ngIf="sortType == 'status' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'status' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'status'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="sort pr-1 align-middle  text-center cursor-pointer min-w-100px" (click)="sortType = 'note'; sortReverse = !sortReverse">
                                    Notes
                                    <span *ngIf="sortType == 'note' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'note' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'note'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="no-sort pr-1 align-middle data-table-row-action">
                                  </th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr class="btn-reveal-trigger" *ngFor="let ld of leadData |filter: searchLead | orderBy:sortType:sortReverse | paginate: activityConfig">
                                  <td class="align-middle">
                                    <div class="custom-control custom-checkbox">
                                      <input class="custom-control-input" type="checkbox" id="lAct{{ld.id}}" [(ngModel)]="ld.checkboxOpe" (change)="isAllSelected()" />
                                      <label class="custom-control-label" for="lAct{{ld.id}}"></label>
                                    </div>
                                  </td>
                                  <td class="align-middle text-left bold-text">
                                    <a href="javascript:void(0)" (click)="editActivity(ld.id,'actitityList',ld.leadId)">
                                      {{ld.activityType}}
                                    </a>
                                  </td>
                                  <td class="align-middle text-center">
                                    <a href="javascript:void(0)" (click)="editLead(ld.leadId,'activity')">
                                      {{ld.leadTitle}}
                                    </a>
                                  </td>
                                  <td class="align-middle text-center">
                                    {{ld.begDate}}
                                  </td>
                                  <td class="align-middle text-center">
                                    {{ld.begTime}}
                                  </td>
                                  <td class="align-middle text-center">
                                    {{ld.duration}}
                                  </td>
                                  <td class="align-middle  d-flex justify-content-center">
                                    <ul class="nav avatar-group mb-0">
                                      <li class="nav-item dropdown" *ngFor="let asg of ld.assigner">
                                        <a class="nav-link p-0 dropdown-toggle dropdown-caret-none" data-toggle="tooltip" [title]="asg.name" data-placement="top">
                                          <div class="avatar avatar-xl">
                                            <img class="rounded-circle" src="{{asg.img}}" alt="" />
                                          </div>
                                        </a>
                                      </li>
                                    </ul>
                                  </td>
                                  <td class="align-middle text-center fs-0 text-center">
                                    <span class="badge badge rounded-capsule badge-soft-{{ld.statusColor}}">
                                      {{ld.status}}
                                    </span>
                                  </td>
                                  <td class="align-middle text-center">
                                    <a class="nav-link cursor-pointer" *ngIf="ld.note!=''" (click)="setNote(ld.note)">
                                      <i class="far fa-sticky-note bold fs-18" *ngIf="ld.note!=''"></i>
                                    </a>
                                    <div class="dropdown-menu dropdown-md px-0 py-3">
                                      <div class="media align-items-center px-3">
                                        <i class="far fa-edit"></i>
                                      </div>
                                    </div>
                                  </td>
                                  <td class="align-middle white-space-nowrap">
                                    <div class="dropdown text-sans-serif">
                                      <button class="btn btn-link text-600 btn-sm dropdown-toggle btn-reveal mr-3"
                                              type="button" id="dropdown0"
                                              data-toggle="dropdown"
                                              data-boundary="html"
                                              aria-haspopup="true"
                                              aria-expanded="false">
                                        <span class="fas fa-ellipsis-h fs--1"></span>
                                      </button>
                                      <div class="dropdown-menu dropdown-menu-right border py-0"
                                           aria-labelledby="dropdown0">
                                        <div class="bg-white py-2">
                                          <a class="dropdown-item" href="javascript:void(0)" (click)="editActivity(ld.id,'actitityList',ld.leadId)">Edit</a>
                                          <div class="dropdown-divider">
                                          </div>
                                          <a class="dropdown-item" href="javascript:void(0)" (click)="changeStatus('leadActivityStatus',ld.id,2,'leadActivityGrid')">Complete</a>
                                          <a class="dropdown-item text-danger" href="javascript:void(0)" (click)="modalDelete(ld.id,'leadActivity','leadActivityGrid',[],'')">Delete</a>
                                        </div>
                                      </div>
                                    </div>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                            <table *ngIf="leadData?.length==0" class="w-100 text-center">
                              <tr>
                                <td colspan="14" class="p-2">
                                  <p class="text-center bold-text font-size18px m-0">No data available</p>
                                  <p class="text-center m-0 text-gray font-size13px">There is not data to show you right now</p>
                                </td>
                              </tr>
                            </table>
                            <pagination-template #p3="paginationApi" [id]="activityConfig.id" maxSize="5" (pageChange)="activityConfig.currentPage = $event" (pageBoundsCorrection)="activityConfig.currentPage = $event">
                              <div *ngIf="p3.pages?.length > 0" class="row mx-1 align-items-center justify-content-center justify-content-md-between">
                                <div class="col-auto mb-2 mb-sm-0">
                                  <div class="dataTables_info">Showing {{((p3.getCurrent()-1)*activityConfig.itemsPerPage)+1}} to {{(p3.getCurrent()*activityConfig.itemsPerPage) < p3.getTotalItems() ? (p3.getCurrent()*activityConfig.itemsPerPage) : p3.getTotalItems()}} of {{p3.getTotalItems()}} entries</div>
                                </div>
                                <div class="col-auto">
                                  <div class="dataTables_paginate paging_simple_numbers pt-3">
                                    <ul class="pagination pagination-sm">
                                      <li class="paginate_button page-item previous" [class.disabled]="p3.isFirstPage()">
                                        <a class="page-link" (click)="p3.previous()"> < </a>
                                      </li>
                                      <li class="paginate_button page-item" *ngFor="let page of p3.pages" [class.active]="p3.getCurrent() === page.value">
                                        <a class="page-link" (click)="p3.setCurrent(page.value);masterSelectedRefresh('lActivityBulk')" *ngIf="p3.getCurrent() !== page.value">{{ page.label }}</a>
                                        <a class="page-link" *ngIf="p3.getCurrent() === page.value">{{ page.label }}</a>
                                      </li>
                                      <li class="paginate_button page-item next" [class.disabled]="p3.isLastPage()">
                                        <a class="page-link" (click)="p3.next()"> > </a>
                                      </li>
                                    </ul>
                                  </div>
                                </div>
                              </div>
                            </pagination-template>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <ngx-loading [show]="loading" class="z-index1000"></ngx-loading>
                </div>
              </div>
              <div class="tab-pane fade" id="pill-tab-4" role="tabpanel" [class.show]="tabid==4" [class.active]="tabid==4" aria-labelledby="calendar-tab">
                <div class="card shadow-none">
                  <div [style.opacity]="loading ? '0' : '1'">
                    <div class="card-header">
                      <div class="row no-gutters align-items-center">
                        <div class="col-auto d-flex justify-content-end order-md-1">
                          <button class="btn icon-item icon-item-sm icon-item-hover shadow-none p-0 mr-1 ml-md-2"
                                  type="button" data-event="prev" data-toggle="tooltip" title="Previous">
                            <span class="fas fa-arrow-left"></span>
                          </button>
                          <button class="btn icon-item icon-item-sm icon-item-hover shadow-none p-0 mr-1" type="button" data-event="next" data-toggle="tooltip" title="Next">
                            <span class="fas fa-arrow-right"></span>
                          </button>
                        </div>
                        <div class="col-auto col-md-auto order-md-2">
                          <h4 class="mb-0 fs-0 fs-sm-1 fs-lg-2 calendar-title"></h4>
                        </div>
                        <div class="col col-md-auto d-flex justify-content-end order-md-3">
                          <button class="btn btn-falcon-primary btn-sm" type="button" data-event="today">Today</button>
                        </div>
                        <div class="col-md-auto d-md-none">
                          <hr />
                        </div>
                        <div class="col-auto d-flex order-md-0">
                          <button class="btn btn-primary btn-sm" type="button" data-toggle="modal" (click)="newLeadSearch(1,'calendarIns')">
                            <span class="fas fa-plus mr-2"></span>Add Activity
                          </button>
                        </div>
                        <div class="col d-flex justify-content-end order-md-2">
                          <div class="dropdown text-sans-serif mr-md-2">
                            <button class="btn btn-falcon-default text-600 btn-sm dropdown-toggle dropdown-caret-none" type="button" id="email-filter" data-toggle="dropdown" data-boundary="viewport" aria-haspopup="true" aria-expanded="false">
                              <span data-view-title="data-view-title">Month View</span>
                              <span class="fas fa-sort ml-2 fs--1"></span>
                            </button>
                            <div class="dropdown-menu dropdown-menu-right border py-2" aria-labelledby="email-filter">
                              <a class="active dropdown-item d-flex justify-content-between" href="javascript:void(0)" data-fc-view="dayGridMonth">Month View<span><span class="fas fa-check" data-fa-transform="down-4 shrink-4"></span></span></a>
                              <a class="dropdown-item d-flex justify-content-between" href="javascript:void(0)" data-fc-view="dayGridWeek">Week View<span><span class="fas fa-check" data-fa-transform="down-4 shrink-4"></span></span></a>
                              <a class="dropdown-item d-flex justify-content-between" href="javascript:void(0)" data-fc-view="timeGridDay">Day View<span><span class="fas fa-check" data-fa-transform="down-4 shrink-4"></span></span></a>
                              <a class="dropdown-item d-flex justify-content-between" href="javascript:void(0)" data-fc-view="listWeek">List<span><span class="fas fa-check" data-fa-transform="down-4 shrink-4"></span></span></a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="card-body p-0">
                      <div id="appCalendar" style="height: 800px;"></div>
                    </div>
                  </div>
                  <ngx-loading [show]="loading" class="z-index1000"></ngx-loading>
                </div>
              </div>
              <div class="tab-pane fade" id="pill-tab-5" role="tabpanel" [class.show]="tabid==5" [class.active]="tabid==5"
                   aria-labelledby="proposal-tab">
                <div class="card shadow-none">
                  <div [style.opacity]="loading ? '0' : '1'">
                    <div class="card-header">
                      <div class="row align-items-center justify-content-between">
                        <div class="col-6 col-sm-auto d-flex align-items-center mr-0">
                          <div id="DataTables_Table_0_filter"
                               class="dataTables_filter d-sm-inline-block">
                            <input type="search" class="form-control" placeholder="Search" [(ngModel)]="searchLead">
                          </div>
                        </div>
                        <div class="col-6 col-sm-auto ml-auto text-right pl-0">
                          <div class="d-none" id="orders-actions">
                            <div class="input-group input-group-sm">
                              <select class="custom-select cus"
                                      aria-label="Bulk actions">
                                <option selected="">Bulk actions</option>
                                <option value="Refund">Refund</option>
                                <option value="Delete">Delete</option>
                              </select>
                              <button class="btn btn-falcon-default ml-2"
                                      type="button">
                                Apply
                              </button>
                            </div>
                          </div>
                          <div id="dashboard-actions">
                            <div class="btn-group" [hidden]="checkedList?.length==0">
                              <button class="btn dropdown-toggle btn-info mx-2" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <span class="fas fa-bars pt-1"></span>
                                <span class="d-none d-sm-inline-block">Actions</span>
                              </button>
                              <div class="dropdown-menu dropdown-edit">
                                <!--<a class="dropdown-item" href="javascript:void(0)" (click)="bulkActions('proposalBulk','pr','proposalToNeedcare')">Need Care</a>
                                <hr class="hr-padding" />-->
                                <a class="dropdown-item text-danger" href="javascript:void(0)" (click)="modalDelete(0,'','',['proposalListStatus'],'')">Delete</a>
                              </div>
                            </div>
                            <div class="btn-group" [hidden]="checkedList?.length > 0">
                              <button id="proposalButtons" class="btn  btn-success" (click)="newLeadSearch(1,'proposalList')"
                                      type="button">
                                <span class="fas fa-plus"
                                      data-fa-transform="shrink-3 down-2"></span>
                                <span class="d-none d-sm-inline-block">
                                  New
                                  Proposal
                                </span>
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="card-body pt-0">
                      <div class="row">
                        <div class="col-12">
                          <div class="falcon-data-table table-responsive">
                            <table class="table table-sm table-dashboard fs--1 data-table border-bottom">
                              <thead class="bg-200">
                                <tr>
                                  <th class="no-sort pr-1 align-middle data-table-row-bulk-select">
                                    <div class="custom-control custom-checkbox">
                                      <input class="custom-control-input"
                                             id="proposalBulk"
                                             type="checkbox"
                                             [(ngModel)]="masterSelected" (change)="checkUncheckAll(proposalConfig.currentPage,proposalConfig.itemsPerPage)"
                                             [disabled]="leadData?.length==0" />
                                      <label class="custom-control-label"
                                             for="proposalBulk"></label>
                                    </div>
                                  </th>
                                  <th class="sort pr-1 align-middle  text-left cursor-pointer min-w-200px" (click)="sortType = 'title'; sortReverse = !sortReverse">
                                    Proposal Title
                                    <span *ngIf="sortType == 'title' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'title' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'title'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="sort pr-1 align-middle  text-center cursor-pointer min-w-150px" (click)="sortType = 'leadTitle'; sortReverse = !sortReverse">
                                    Opportunity Title
                                    <span *ngIf="sortType == 'leadTitle' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'leadTitle' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'leadTitle'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="sort pr-1 align-middle  text-center cursor-pointer min-w-100px" (click)="sortType = 'customer'; sortReverse = !sortReverse">
                                    Customer
                                    <span *ngIf="sortType == 'customer' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'customer' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'customer'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="sort pr-1 align-middle  text-center cursor-pointer min-w-100px" (click)="sortType = 'owner'; sortReverse = !sortReverse">
                                    Owner
                                    <span *ngIf="sortType == 'owner' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'owner' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'owner'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="sort pr-1 align-middle  text-center cursor-pointer min-w-100px" (click)="sortType = 'amount'; sortReverse = !sortReverse">
                                    Owner Price
                                    <span *ngIf="sortType == 'amount' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'amount' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'amount'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="sort pr-1 align-middle  text-center cursor-pointer min-w-100px" (click)="sortType = 'status'; sortReverse = !sortReverse">
                                    Status
                                    <span *ngIf="sortType == 'status' && !sortReverse">
                                      <i class="fas fa-sort-up"></i>
                                    </span>
                                    <span *ngIf="sortType == 'status' && sortReverse">
                                      <i class="fas fa-sort-down"></i>
                                    </span>
                                    <span *ngIf="sortType != 'status'">
                                      <i class="fas fa-sort"></i>
                                    </span>
                                  </th>
                                  <th class="no-sort pr-1 align-middle data-table-row-action">
                                  </th>
                                </tr>
                              </thead>
                              <tbody id="proposalTbody">
                                <tr class="btn-reveal-trigger" *ngFor="let ld of leadData | filter: searchLead | orderBy:sortType:sortReverse | paginate: proposalConfig">
                                  <td class="align-middle">
                                    <div class="custom-control custom-checkbox">
                                      <input class="custom-control-input"
                                             type="checkbox"
                                             id="pr{{ld.id}}"
                                             [(ngModel)]="ld.checkboxOpe" (change)="isAllSelected()" />
                                      <label class="custom-control-label"
                                             for="pr{{ld.id}}"></label>
                                    </div>
                                  </td>
                                  <td class="align-middle text-left bold-text">
                                    <a href="javascript:void(0)" (click)="editProposal(ld.id,'proposalList',ld.leadId)">
                                      {{ld.title}}
                                    </a>
                                  </td>
                                  <th class="align-middle text-center">
                                    <a href="javascript:void(0)" (click)="editLead(ld.leadId,'proposal')">
                                      {{ld.leadTitle}}
                                    </a>
                                  </th>
                                  <td class="align-middle text-center">
                                    {{ld.customer}}
                                  </td>
                                  <td class="align-middle text-center">
                                    <a>
                                      <div class="media d-flex align-items-center text-center d-flex justify-content-center">
                                        <div class="avatar avatar-xl mr-2">
                                          <img class="rounded-circle" src="{{ld.ownerImage}}" alt="" data-toggle="tooltip" data-placement="top" title="{{ld.owner}}" *ngIf="ld.ownerId!=0">
                                        </div>
                                      </div>
                                    </a>
                                  </td>
                                  <td class="align-middle text-center">
                                    $ {{ld.amount}}
                                  </td>
                                  <td class="align-middle text-center fs-0">
                                    <span class="badge badge rounded-capsule badge-soft-{{ld.statusColor}}">
                                      {{ld.status}}
                                    </span>
                                  </td>
                                  <td class="align-middle white-space-nowrap">
                                    <div class="dropdown text-sans-serif">
                                      <button class="btn btn-link text-600 btn-sm dropdown-toggle btn-reveal mr-3"
                                              type="button" id="dropdown0"
                                              data-toggle="dropdown"
                                              data-boundary="html"
                                              aria-haspopup="true"
                                              aria-expanded="false">
                                        <span class="fas fa-ellipsis-h fs--1"></span>
                                      </button>
                                      <div class="dropdown-menu dropdown-menu-right border py-0"
                                           aria-labelledby="dropdown0">
                                        <div class="bg-white py-2">
                                          <a class="dropdown-item" href="javascript:void(0)" (click)="editProposal(ld.id,'proposalList',ld.leadId)">Edit</a>
                                          <div class="dropdown-divider">
                                          </div><a class="dropdown-item text-danger"
                                                   href="javascript:void(0)" (click)="modalDelete(ld.id,'leadProposal','leadProposalGrid',[],'')">Delete</a>
                                        </div>
                                      </div>
                                    </div>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                            <table *ngIf="leadData?.length==0" class="w-100 text-center">
                              <tr>
                                <td colspan="14" class="p-2">
                                  <p class="text-center bold-text font-size18px m-0">No data available</p>
                                  <p class="text-center m-0 text-gray font-size13px">There is not data to show you right now</p>
                                </td>
                              </tr>
                            </table>
                            <pagination-template #p4="paginationApi" [id]="proposalConfig.id" maxSize="5" (pageChange)="proposalConfig.currentPage = $event" (pageBoundsCorrection)="proposalConfig.currentPage = $event">
                              <div *ngIf="p4.pages?.length > 0" class="row mx-1 align-items-center justify-content-center justify-content-md-between">
                                <div class="col-auto mb-2 mb-sm-0">
                                  <div class="dataTables_info">Showing {{((p4.getCurrent()-1)*proposalConfig.itemsPerPage)+1}} to {{(p4.getCurrent()*proposalConfig.itemsPerPage) < p4.getTotalItems() ? (p4.getCurrent()*proposalConfig.itemsPerPage) : p4.getTotalItems()}} of {{p4.getTotalItems()}} entries</div>
                                </div>
                                <div class="col-auto">
                                  <div class="paging_simple_numbers pt-3">
                                    <ul class="pagination pagination-sm">
                                      <li class="paginate_button page-item previous" [class.disabled]="p4.isFirstPage()">
                                        <a class="page-link" (click)="p4.previous()"> < </a>
                                      </li>
                                      <li class="paginate_button page-item" *ngFor="let page of p4.pages" [class.active]="p4.getCurrent() === page.value">
                                        <a class="page-link" (click)="p4.setCurrent(page.value);masterSelectedRefresh('proposalBulk')" *ngIf="p4.getCurrent() !== page.value">{{ page.label }}</a>
                                        <a class="page-link" *ngIf="p4.getCurrent() === page.value">{{ page.label }}</a>
                                      </li>
                                      <li class="paginate_button page-item next" [class.disabled]="p4.isLastPage()">
                                        <a class="page-link" (click)="p4.next()"> > </a>
                                      </li>
                                    </ul>
                                  </div>
                                </div>
                              </div>
                            </pagination-template>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <ngx-loading [show]="loading" class="z-index1000"></ngx-loading>
                </div>
              </div>
              <!-- <div class="tab-pane fade" id="pill-tab-map" role="tabpanel"
                  aria-labelledby="map-tab">
                  <div class="card-body bg-light">
                      <div class="row">
                          <div class="col-12">
                              <div class="googlemap min-vh-50"
                                  data-latlng="48.8583701,2.2922873,17"
                                  data-scrollwheel="false"
                                  data-icon="../assets/img/icons/map-marker.png"
                                  data-zoom="17" data-theme="Default">
                                  <div class="marker-content py-3">
                                      <h5>Eiffel Tower</h5>
                                      <p>Gustave Eiffel's iconic, wrought-iron 1889
                                          tower,<br> with steps and elevators to
                                          observation decks.</p>
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
              </div> -->
              <div class="tab-pane fade" id="pill-tab-7" role="tabpanel" [class.show]="tabid==7" [class.active]="tabid==7"
                   aria-labelledby="archive-tab">
                <div class="card shadow-none">
                  <div [style.opacity]="loading ? '0' : '1'">
                    <div class="card-header">
                      <div class="row align-items-center justify-content-between">
                        <div class="col-6 col-sm-auto d-flex align-items-center mr-0">
                          <div id="DataTables_Table_0_filter"
                               class="dataTables_filter d-sm-inline-block">
                            <input type="search"
                                   class="form-control"
                                   placeholder="Search by name"
                                   aria-controls="DataTables_Table_0">
                          </div>
                        </div>
                        <div class="col-6 col-sm-auto ml-auto text-right pl-0">
                        </div>
                      </div>
                    </div>
                    <div class="card-body pt-0">
                      <div class="row">
                        <div class="col-12">
                          <div class="dashboard-data-table table-responsive">
                            <table class="table table-sm table-dashboard fs--1 data-table border-bottom">
                              <thead class="bg-200">
                                <tr>
                                  <th class="no-sort pr-1 align-middle data-table-row-bulk-select">
                                    <div class="custom-control custom-checkbox">
                                      <input class="custom-control-input checkbox-bulk-select"
                                             id="checkbox-bulk-purchases-select"
                                             type="checkbox"
                                             data-checkbox-body="#purchases"
                                             data-checkbox-actions="#purchases-actions"
                                             data-checkbox-replaced-element="#dashboard-actions" />
                                      <label class="custom-control-label"
                                             for="checkbox-bulk-purchases-select"></label>
                                    </div>
                                  </th>
                                  <th class="sort pr-1 align-middle min-w-200px">
                                    Opportunity Title
                                  </th>
                                  <th class="sort pr-1 align-middle min-w-150px">
                                    Date
                                  </th>
                                  <th class="sort pr-1 align-middle min-w-100px">
                                    Customer
                                  </th>
                                  <th class="sort pr-1 align-middle text-center min-w-100px">
                                    Status
                                  </th>
                                  <th class="sort pr-1 align-middle text-right min-w-100px">
                                    Amount
                                  </th>
                                  <th class="no-sort pr-1 align-middle data-table-row-action">
                                  </th>
                                </tr>
                              </thead>
                              <tbody id="purchases">
                                <tr class="btn-reveal-trigger">
                                  <td class="align-middle">
                                    <div class="custom-control custom-checkbox">
                                      <input class="custom-control-input checkbox-bulk-select-target"
                                             type="checkbox"
                                             id="checkbox-0" />
                                      <label class="custom-control-label"
                                             for="checkbox-0"></label>
                                    </div>
                                  </td>
                                  <th class="align-middle">
                                    <a href="../pages/customer-details.html">
                                      Sylvia
                                      Plath
                                    </a>
                                  </th>
                                  <td class="align-middle">
                                    john@gmail.com
                                  </td>
                                  <td class="align-middle">
                                    Slick - Drag
                                    &amp; Drop Bootstrap Generator
                                  </td>
                                  <td class="align-middle text-center fs-0">
                                    <span class="badge badge rounded-capsule badge-soft-success">
                                      Success
                                    </span>
                                  </td>
                                  <td class="align-middle text-right">
                                    $99
                                  </td>
                                  <td class="align-middle white-space-nowrap">
                                    <div class="dropdown text-sans-serif">
                                      <button class="btn btn-link text-600 btn-sm dropdown-toggle btn-reveal mr-3"
                                              type="button" id="dropdown0"
                                              data-toggle="dropdown"
                                              data-boundary="html"
                                              aria-haspopup="true"
                                              aria-expanded="false">
                                        <span class="fas fa-ellipsis-h fs--1"></span>
                                      </button>
                                      <div class="dropdown-menu dropdown-menu-right border py-0"
                                           aria-labelledby="dropdown0">
                                        <div class="bg-white py-2">
                                          <a class="dropdown-item" href="#!">View</a>
                                          <a class="dropdown-item" href="#!">Edit</a><a class="dropdown-item" href="#!">Refund</a>
                                          <div class="dropdown-divider">
                                          </div><a class="dropdown-item text-danger" href="#!">Delete</a>
                                        </div>
                                      </div>
                                    </div>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <ngx-loading [show]="loading" class="z-index1000"></ngx-loading>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!--Calendar Modal-->
<div class="modal theme-modal fade px-0" style="padding-left:0!important;padding-right:0!important" id="eventDetails" tabindex="-1" role="dialog" aria-labelledby="eventDetails" data-backdrop="static" data-keyboard="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content border">
      <div class="modal-header px-card bg-light border-0 flex-between-center">
        <span *ngIf="calendarEventData.statusId==1 && calendarEventData.overdueOpe==0" class="{{calendarEventData.className}} event-color-span"></span>
        <span *ngIf="calendarEventData.statusId==2" class="fas fa-check-circle fs-18 p-2 pr-3 text-success"></span>
        <span *ngIf="calendarEventData.overdueOpe==1" class="fas fa-exclamation-circle fs-18 p-2 pr-3 text-danger"></span>
        <div>
          <h5 class="mb-0">{{calendarEventData.title}}</h5>
          <p class="mb-0 event-created mt-1">Created <strong>{{calendarEventData.createDate}}</strong> by <strong>{{calendarEventData.organizer}}</strong></p>
        </div>
        <button class="close fs-0 px-card" data-dismiss="modal" aria-label="Close">
          <span class="fas fa-times"></span>
        </button>
      </div>
      <div class="modal-body px-card pb-card pt-1 fs--1 calendar-body pt-3">
        <div class="media mt-1">
          <div class="media-body justify-left">
            <h6>Lead:</h6>
            <a class="mb-1 cursor-pointer font-weight-bold" (click)="editLead(calendarEventData.leadId,'calendarEdit')">
              {{calendarEventData.leadName}}
            </a>
          </div>
        </div>
        <div class="media mt-1" *ngIf="calendarEventData.customerName!=''">
          <div class="media-body justify-left">
            <h6>Customer:</h6>
            <p class="mb-1">
              {{calendarEventData.customerName}}
            </p>
          </div>
        </div>

        <div class="media mt-1" *ngIf="calendarEventData.phone!=''">
          <div class="media-body justify-left">
            <h6>Phone:</h6>
            <p class="mb-1"><a href="tel:{{calendarEventData.phone}}">{{calendarEventData.phone}}</a></p>
          </div>
        </div>
        <div class="media mt-1" *ngIf="calendarEventData.cellPhone!=''">
          <div class="media-body justify-left">
            <h6>Cell Phone:</h6>
            <p class="mb-1"><a href="tel:{{calendarEventData.cellPhone}}">{{calendarEventData.cellPhone}}</a></p>
          </div>
        </div>
        <div class="media mt-1" *ngIf="calendarEventData.email!=''">
          <div class="media-body justify-left">
            <h6>Email:</h6>
            <p class="mb-1"><a href="mailto:{{calendarEventData.email}}">{{calendarEventData.email}}</a></p>
          </div>
        </div>

        <div class="media mt-1">
          <div class="media-body justify-left">
            <h6>Start Date & Time:</h6>
            <p class="mb-1">
              {{calendarEventData.start}}
            </p>
          </div>
        </div>
        <div class="media mt-1">
          <div class="media-body justify-left">
            <h6>Duration:</h6>
            <p class="mb-1">
              {{calendarEventData.duration}}
            </p>
          </div>
        </div>
        <div class="media mt-1">
          <div class="media-body justify-left">
            <h6>End Date & Time:</h6>
            <p class="mb-1">
              {{calendarEventData.end}}
            </p>
          </div>
        </div>
        <div class="media mt-1" *ngIf="calendarEventData.assigner">
          <div class="media-body justify-left">
            <h6 class="assigner-h6">Assignees:</h6>
            <ul class="nav avatar-group mb-2">
              <li class="nav-item dropdown cursor-pointer mr-1" *ngFor="let asg of calendarEventData.assigner">
                <div class="nav-link p-0 dropdown-toggle dropdown-caret-none" href="javascript:void(0)" data-toggle="dropdown">
                  <div class="avatar avatar-xl remove-asg">
                    <img class="rounded-circle" src="{{asg.img}}" alt="{{asg.name}}" data-toggle="tooltip" data-placement="top" title="{{asg.name}}" />
                  </div>
                </div>
              </li>
            </ul>

          </div>
        </div>
        <div class="media mt-1" *ngIf="calendarEventData.description">
          <div class="media-body justify-left">
            <h6>Notes: </h6>
            <p class="mb-1">
              {{calendarEventData.description}}
            </p>
          </div>
        </div>
      </div>
      <div class="modal-footer d-flex justify-content-end bg-light px-card border-top-0">
        <button class="btn btn-falcon-default" data-dismiss="modal" aria-label="Close">Close</button>
        <button class="btn btn-falcon-danger" (click)="modalDelete(calendarEventData.id,'leadActivityCalendar','leadActivityCalendar',[],'leadActivityCalendar')">Delete</button>
        <button class="btn btn-falcon-default" (click)="editActivity(calendarEventData.id,'calendarEdit',calendarEventData.leadId)">Edit</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Lead-->
<div class="modal fade z-index3000 px-0" style="padding-left:0!important;padding-right:0!important" id="leadModal" tabindex="-1" role="dialog" aria-labelledby="leadModalLabel" data-backdrop="static" data-keyboard="true"
     aria-hidden="true">
  <div class="modal-dialog lead-modal-width" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Lead Details</h5>
        <button class="close" type="button" aria-label="Close" (click)="modalLeadClose()">
          <span class="font-weight-light" aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" name="leadModalBody" id="leadModalBody">
        <div class="row">
          <div class="col-12 pt-3">
            <div class="custom-control custom-radio custom-control-inline " *ngIf="customerTempObj.id!=0">
              <input class="custom-control-input" type="radio" id="customerOpeType1" name="customerOpeType" [(ngModel)]="customerOpeType" [value]="1" (click)="chooseCustomerOpeType(1)">
              <label class="custom-control-label cursor-pointer f-sm-12" for="customerOpeType1">Current Customer</label>
            </div>
            <div class="custom-control custom-radio custom-control-inline">
              <input class="custom-control-input" type="radio" id="customerOpeType2" name="customerOpeType" [(ngModel)]="customerOpeType" [value]="2" (click)="chooseCustomerOpeType(2)">
              <label class="custom-control-label cursor-pointer f-sm-12" for="customerOpeType2">Without Customer</label>
            </div>
            <div class="custom-control custom-radio custom-control-inline">
              <input class="custom-control-input" type="radio" id="customerOpeType3" name="customerOpeType" [(ngModel)]="customerOpeType" [value]="3" (click)="chooseCustomerOpeType(3)">
              <label class="custom-control-label cursor-pointer f-sm-12" for="customerOpeType3">New Customer</label>
            </div>
            <!--res-mr-xs-35-->
            <div class="custom-control custom-radio custom-control-inline">
              <input class="custom-control-input" type="radio" id="customerOpeType4" name="customerOpeType" [(ngModel)]="customerOpeType" [value]="4" (click)="chooseCustomerOpeType(4)">
              <label class="custom-control-label cursor-pointer f-sm-12" for="customerOpeType4">Search Existing</label>
            </div>
          </div>
        </div>
        <div class="row mt-4" [hidden]="customerOpeType==2">
          <div class="col-12" [hidden]="customerViewOpe==1">
            <ul class="nav nav-tabs" id="customer_tab" role="tablist">
              <li class="nav-item">
                <a class="nav-link active" id="contact-information-tab"
                   data-toggle="tab" href="#tab-contact-information" role="tab"
                   aria-controls="tab-contact-information" aria-selected="true">
                  Contact Information
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" id="billing-address-tab"
                   data-toggle="tab" href="#tab-billing-address" role="tab"
                   aria-controls="tab-billing-address" aria-selected="true">
                  Billing
                  Address
                </a>
              </li>
            </ul>
            <div class="tab-content border-x border-bottom p-3" id="myTabContent" [hidden]="customerOpeType==2">
              <div class="tab-pane fade  show active" id="tab-contact-information"
                   role="tabpanel" aria-labelledby="contact-information-tab">
                <div class="row">
                  <div class="col-md-3 col-12">
                    <div class="form-group">
                      <label>First Name</label>
                      <input class="form-control" type="text" name="firstName" [(ngModel)]="leadObj.customerObj.firstName" appTrimLeft />
                    </div>
                  </div>
                  <div class="col-md-3 col-12">
                    <div class="form-group">
                      <label for="lastname">Last Name</label>
                      <input class="form-control" id="lastname" type="text" name="lastName" [(ngModel)]="leadObj.customerObj.lastName" appTrimLeft />
                    </div>
                  </div>
                  <div class="col-md-6 col-12">
                    <div class="form-group">
                      <label for="company">Company</label>
                      <input class="form-control" id="company" type="text" name="company" [(ngModel)]="leadObj.customerObj.company" appTrimLeft />
                    </div>
                  </div>
                  <div class="col-md-3 col-12">
                    <div class="form-group">
                      <label for="phone">
                        Phone
                      </label>
                      <input class="form-control" id="phone" type="tel" name="phone" mask="000 000-0000" [dropSpecialCharacters]="false" [(ngModel)]="leadObj.customerObj.phone" />
                    </div>
                  </div>
                  <div class="col-md-3 col-12">
                    <div class="form-group">
                      <label for="cellPhone">
                        Cell Phone
                      </label>
                      <input class="form-control" id="Phone" type="tel" name="cellPhone" mask="000 000-0000" [dropSpecialCharacters]="false" [(ngModel)]="leadObj.customerObj.cellPhone" />
                    </div>
                  </div>
                  <div class="col-md-6 col-12">
                    <div class="form-group" [ngClass]="{'invalid':(emailCustomer.invalid && (emailCustomer.dirty || emailCustomer.touched))}">
                      <label for="emailCustomer">Email</label>
                      <input class="form-control" id="emailCustomer" type="email" [(ngModel)]="leadObj.customerObj.email"
                             #emailCustomer="ngModel"
                             pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$"
                             required
                             autocomplete="off" appTrimLeft autofocus />
                      <!--pattern="^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$"-->
                      <!--pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$"-->
                      <div *ngIf="emailCustomer.invalid && (emailCustomer.dirty || emailCustomer.touched)" class="validation">
                        Please input valid e-mail
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="tab-pane fade" id="tab-billing-address" role="tabpanel"
                   aria-labelledby="billing-address-tab">
                <div class="row">
                  <div class="col-lg-6 col-md-9 col-12">
                    <div class="row">
                      <div class="col-12">
                        <div class="form-group">
                          <label for="street">
                            Street
                          </label>
                          <input class="form-control" id="street" type="text" [(ngModel)]="leadObj.customerObj.street" appTrimLeft />
                        </div>
                      </div>
                      <div class="col-md-4 col-12">
                        <div class="form-group">
                          <label for="city">
                            City
                          </label>
                          <input class="form-control" id="city" type="text" [(ngModel)]="leadObj.customerObj.city" oninput="this.value = this.value.charAt(0).toUpperCase() + this.value.slice(1)" appTrimLeft />
                        </div>
                      </div>
                      <div class="col-md-4 col-12">
                        <div class="form-group">
                          <label for="stateProvince">
                            State
                          </label>
                          <input class="form-control" id="stateProvince" type="text" [(ngModel)]="leadObj.customerObj.stateProvince" oninput="this.value = this.value.charAt(0).toUpperCase() + this.value.slice(1)" appTrimLeft />
                        </div>
                      </div>
                      <div class="col-md-4 col-12">
                        <div class="form-group">
                          <label for="zipCode">
                            ZIP Code
                          </label>
                          <input class="form-control" id="zipCode" type="text" mask="00000" [(ngModel)]="leadObj.customerObj.zipCode" appTrimLeft />
                        </div>
                      </div>
                      <div class="col-12">
                        <a href="javascript:void(0)" (click)="copyFromProjectAddress()" class="fs-13">Copy from project address</a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="tab-pane fade" id="tab-relations" role="tabpanel"
                   aria-labelledby="relations-tab">
                <div class="row">
                  <div class="col-sm-4 col-12">
                    <div class="form-group">
                      <label for="assignToContractor">
                        Assign to
                        contractor
                      </label>
                      <select class="form-control" id="assignToContractor" name="assignToContractor" [(ngModel)]="leadObj.customerObj.assignToContractor">
                        <option [ngValue]="0">None</option>
                        <option [ngValue]="1">Create New Customer</option>
                        <option [ngValue]="2">Search Existing Customer</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-12" [hidden]="customerViewOpe==0">
            <div class="card border-card shadow-none border">
              <div class="card-header bg-light">
                <div class="row align-items-center">
                  <div class="col">
                    <h5 class="mb-0">
                      {{leadObj.customerObj.firstName}} {{leadObj.customerObj.lastName}}
                      <span *ngIf="leadObj.customerObj.firstName && leadObj.customerObj.lastName && leadObj.customerObj.company">-</span>
                      {{leadObj.customerObj.company}}
                    </h5>
                  </div>
                  <div class="col-auto">
                    <a class="btn btn-falcon-default" (click)="customerViewOpe = 0">
                      <span class="fas fa-pencil-alt fs--2 mr-sm-1 mr-0"></span>
                      <span class="d-md-inline-block d-none">Customer Details</span>
                    </a>
                  </div>
                </div>
              </div>
              <div class="card-body border-top">
                <div class="row">
                  <div class="col-lg col-xxl-5">
                    <div class="row">
                      <div class="col-5 col-sm-4">
                        <p class="font-weight-semi-bold mb-1">ID</p>
                      </div>
                      <div class="col">{{leadObj.customerObj.id}}</div>
                    </div>
                    <div class="row">
                      <div class="col-5 col-sm-4">
                        <p class="font-weight-semi-bold mb-1">Created</p>
                      </div>
                      <div class="col">{{leadObj.customerObj.createDate}}</div>
                    </div>
                    <div class="row">
                      <div class="col-5 col-sm-4">
                        <p class="font-weight-semi-bold mb-1">Phone</p>
                      </div>
                      <div class="col">
                        <a *ngIf="leadObj.customerObj.phone!=''" href="tel:{{leadObj.customerObj.phone}}">{{leadObj.customerObj.phone | mask: '(000) 000-0000'}}</a>
                        <span *ngIf="leadObj.customerObj.phone==''">No Phone</span>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-5 col-sm-4">
                        <p class="font-weight-semi-bold mb-0">Cell Phone</p>
                      </div>
                      <div class="col">
                        <a *ngIf="leadObj.customerObj.cellPhone!=''" href="tel:{{leadObj.customerObj.cellPhone}}">{{leadObj.customerObj.cellPhone | mask: '(000) 000-0000'}}</a>
                        <span *ngIf="leadObj.customerObj.cellPhone==''">No Cell Phone</span>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg col-xxl-5 mt-4 mt-lg-0 offset-xxl-1">
                    <div class="row">
                      <div class="col-5 col-sm-4">
                        <p class="font-weight-semi-bold mb-1">Address</p>
                      </div>
                      <div class="col">
                        <a target="_blank" href="https://www.google.com/maps?q={{leadObj.customerObj.street}} {{leadObj.customerObj.city}}, {{leadObj.customerObj.stateProvince}} {{leadObj.customerObj.zipCode}}" class="mb-1" *ngIf="leadObj.customerObj.street!='' || leadObj.customerObj.city!='' || leadObj.customerObj.stateProvince!='' || leadObj.customerObj.zipCode!=''; else not_address">{{leadObj.customerObj.street}} <br>{{leadObj.customerObj.city}}, {{leadObj.customerObj.stateProvince}} {{leadObj.customerObj.zipCode}}</a>
                        <ng-template #not_address>No Address</ng-template>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-5 col-sm-4">
                        <p class="font-weight-semi-bold mb-1">Email</p>
                      </div>
                      <div class="col">
                        <a *ngIf="leadObj.customerObj.email!=''" href="mailto:{{leadObj.customerObj.email}}">{{leadObj.customerObj.email}}</a>
                        <span *ngIf="leadObj.customerObj.email==''">No Email</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row mt-4">
          <div class="col-12">
            <ul class="nav nav-tabs" id="myTab" role="tablist">
              <li class="nav-item">
                <a class="nav-link active" id="general-tab"
                   data-toggle="tab" href="#tab-general" role="tab"
                   aria-controls="tab-home" aria-selected="true">
                  General
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link " id="project-address-tab"
                   data-toggle="tab" href="#tab-project-address" role="tab"
                   aria-controls="tab-project-address" aria-selected="true">
                  Project
                  Address
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" id="sales-people-tab" data-toggle="tab"
                   href="#tab-sales-people" role="tab" aria-controls="tab-sales-people"
                   aria-selected="false">Owner</a>
              </li>
              <li class="nav-item" *ngIf="leadObj.id!=0">
                <a class="nav-link" id="activities-tab" data-toggle="tab"
                   href="#tab-activities" role="tab" aria-controls="tab-profile"
                   aria-selected="false">Activities ({{leadObj.activityObj.length}})</a>
              </li>
              <li class="nav-item" *ngIf="leadObj.id!=0">
                <a class="nav-link" id="proposals-tab" data-toggle="tab"
                   href="#tab-proposals" role="tab" aria-controls="tab-proposals"
                   aria-selected="false">Proposals ({{leadObj.proposalObj.length}})</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" id="files-tab" data-toggle="tab"
                   href="#tab-files" role="tab" aria-controls="tab-files"
                   aria-selected="false">Files ({{getHasFiles()}})</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" id="notes-tab" data-toggle="tab"
                   href="#tab-notes" role="tab" aria-controls="tab-notes"
                   aria-selected="false">Notes</a>
              </li>
            </ul>
            <div class="tab-content border-x border-bottom p-3" id="myTabContent">
              <div class="tab-pane fade show active" id="tab-general" role="tabpanel"
                   aria-labelledby="general-tab">
                <div class="row">
                  <div class="col-md-6 col-12">
                    <div class="form-group" [ngClass]="{'invalid':!leadObj.generalObj.opportunity}">
                      <label for="opportunity">Opportunity title</label>
                      <input class="form-control" id="opportunity" type="text"
                             [(ngModel)]="leadObj.generalObj.opportunity" required="required" appTrimLeft />
                    </div>
                  </div>
                  <div class="col-md-3 col-12">
                    <div class="form-group">
                      <label for="openDate">Open Date</label>
                      <input class="form-control" id="openDate" type="date" max="2099-01-01" min="" [(ngModel)]="leadObj.generalObj.openDate" />
                    </div>
                  </div>
                  <div class="col-md-3 col-12">
                    <div class="form-group">
                      <label for="closedDate">Closed Date</label>
                      <input class="form-control" id="closedDate" type="date" max="2099-01-01" min="{{leadObj.generalObj.openDate}}" [(ngModel)]="leadObj.generalObj.closedDate" />
                    </div>
                  </div>
                  <div class="col-md-4 col-12">
                    <div class="form-group">
                      <label for="projectType">Project type</label>
                      <select class="form-control" id="projectType" name="project-type" [(ngModel)]="leadObj.generalObj.projectType">
                        <option [ngValue]="0">None</option>
                        <option [ngValue]="pl.id" *ngFor="let pl of leadObj.generalObj.projectList">{{pl.name}}</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-md-4 col-12">
                    <div class="form-group">
                      <label for="source">Source</label>
                      <select class="form-control" id="source" name="source" [(ngModel)]="leadObj.generalObj.source">
                        <option [ngValue]="0">None</option>
                        <option [ngValue]="sl.id" *ngFor="let sl of leadObj.generalObj.sourceList">{{sl.name}}</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-md-4 col-12">
                    <div class="form-group">
                      <label for="status">Status</label>
                      <select class="form-control" id="status" name="status" [(ngModel)]="leadObj.generalObj.status">
                        <option [ngValue]="0">None</option>
                        <option [ngValue]="sl.id" *ngFor="let sl of leadObj.generalObj.statusList">{{sl.name}}</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-md-4 col-12">
                    <div class="form-group">
                      <label for="est-sale-revenue">Est. Sale Revenue</label>
                      <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text input-group-text-symbol"
                                id="basic-addon1" style="font-size: 12px;">$</span>
                        </div>
                        <input class="form-control  text-right" [(ngModel)]="leadObj.generalObj.estSaleRevenue" mask="separator" thousandSeparator=",">
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6 col-12">
                    <div class="form-group">
                      <label for="sale-probality">Sale Probality</label>
                      <div id="saleProbality" class="raty"></div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="tab-pane fade" id="tab-project-address" role="tabpanel"
                   aria-labelledby="project-address-tab">
                <div class="row">
                  <div class="col-lg-6 col-md-9 col-12">
                    <div class="row">
                      <div class="col-12">
                        <div class="form-group">
                          <label for="projectStreet">
                            Street
                          </label>
                          <input class="form-control" id="projectStreet" type="text" [(ngModel)]="leadObj.generalObj.projectStreet" appTrimLeft />
                        </div>
                      </div>
                      <div class="col-md-4 col-12">
                        <div class="form-group">
                          <label for="projectCityTown">
                            City
                          </label>
                          <input class="form-control" id="projectCityTown" type="text" [(ngModel)]="leadObj.generalObj.projectCityTown" oninput="this.value = this.value.charAt(0).toUpperCase() + this.value.slice(1)" appTrimLeft />
                        </div>
                      </div>
                      <div class="col-md-4 col-12">
                        <div class="form-group">
                          <label for="projectStateProvince">
                            State
                          </label>
                          <input class="form-control" id="projectStateProvince" type="text" [(ngModel)]="leadObj.generalObj.projectStateProvince" oninput="this.value = this.value.charAt(0).toUpperCase() + this.value.slice(1)" appTrimLeft />
                        </div>
                      </div>
                      <div class="col-md-4 col-12">
                        <div class="form-group">
                          <label for="projectZipCode">
                            ZIP Code
                          </label>
                          <input class="form-control" id="projectZipCode" mask="00000" type="text" [(ngModel)]="leadObj.generalObj.projectZipCode" />
                        </div>
                      </div>
                      <div class="col-12">
                        <a href="javascript:void(0)" (click)="copyFromCustomerAddress()" class="fs-13" *ngIf="customerOpeType!=2">Copy from customer address</a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="tab-pane fade" id="tab-activities" role="tabpanel"
                   aria-labelledby="activities-tab">
                <div class="card-header">
                  <div class="row align-items-center justify-content-between">
                    <div class="col-6 col-sm-auto d-flex align-items-center mr-0">
                      <div class="dataTables_filter d-sm-inline-block">
                        <input type="search" class="form-control" placeholder="Search" [(ngModel)]="searchAct">
                      </div>
                    </div>
                    <div class="col-6 col-sm-auto ml-auto text-right pl-0">
                      <div id="dashboard-actions">
                        <div class="btn-group" [hidden]="activityCheckedList?.length==0">
                          <button class="btn dropdown-toggle btn-info mx-2" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="fas fa-bars pt-1"></i> Actions
                          </button>
                          <div class="dropdown-menu bg-white py-2">
                            <a class="dropdown-item" *ngIf="activityAllCompleted()" href="javascript:void(0)" (click)="bulkActions('activityCompleted')">Completed</a>
                            <div class="dropdown-divider" *ngIf="activityAllCompleted()"></div>
                            <a class="dropdown-item text-danger" href="javascript:void(0)" (click)="modalDelete(0,'','',['activityStatus'],'leadActivityBulk')">Delete</a>
                            <!--(click)="bulkActions('activityBulk','act','activityStatus')"-->
                            <!---->
                          </div>
                        </div>
                        <div class="btn-group" [hidden]="activityCheckedList?.length > 0">
                          <button class="btn btn-success" type="button" (click)="editActivity(0,'activity',leadObj.id)" id="activityButtons">
                            <span class="fas fa-plus" data-fa-transform="shrink-3 down-2"></span>
                            <span class="d-none d-md-inline-block"> New Activity </span>
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="card-body pt-0">
                  <div class="row">
                    <div class="col-12">
                      <div class="dashboard-data-table table-responsive">
                        <table class="table table-sm table-dashboard fs--1 data-table border-bottom">
                          <thead class="bg-200">
                            <tr>
                              <th class="no-sort pr-1 align-middle data-table-row-bulk-select">
                                <div class="custom-control custom-checkbox">
                                  <input class="custom-control-input"
                                         id="activityBulk"
                                         type="checkbox"
                                         [(ngModel)]="activityMasterSelected" (change)="activityCheckUncheckAll()"
                                         [disabled]="leadObj.activityObj?.length==0">
                                  <label class="custom-control-label" for="activityBulk"></label>
                                </div>
                              </th>
                              <th class="sort pr-1 align-middle text-left">
                                Type
                              </th>
                              <th class="sort pr-1 align-middle  text-center">
                                Start date
                              </th>
                              <th class="sort pr-1 align-middle  text-center">
                                Time
                              </th>
                              <th class="sort pr-1 align-middle  text-center">
                                Duration
                              </th>
                              <th class="sort pr-1 align-middle  text-center">
                                Assignee
                              </th>
                              <th class="sort pr-1 align-middle  text-center">
                                Status
                              </th>
                              <th class="sort pr-1 align-middle  text-center">
                                Notes
                              </th>
                              <th class="no-sort pr-1 align-middle data-table-row-action">
                              </th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr class="btn-reveal-trigger" *ngFor="let at of leadObj.activityObj | filter:searchAct">
                              <td class="align-middle">
                                <div class="custom-control custom-checkbox">
                                  <input class="custom-control-input" type="checkbox" id="act{{at.id}}" [(ngModel)]="at.checkboxOpe" (change)="activityIsAllSelected()" />
                                  <label class="custom-control-label" for="act{{at.id}}"></label>
                                </div>
                              </td>
                              <td class="align-middle  text-left bold-text">
                                <a href="javascript:void(0)" (click)="editActivity(at.id,'activity',at.leadId)">
                                  {{at.activityType}}
                                </a>
                              </td>
                              <td class="align-middle text-center">
                                {{at.begDate}}
                              </td>
                              <td class="align-middle text-center">
                                {{at.begTime}}
                              </td>
                              <td class="align-middle text-center">
                                {{at.duration}}
                              </td>
                              <td class="align-middle  d-flex justify-content-center">
                                <ul class="nav avatar-group mb-0">
                                  <li class="nav-item dropdown" *ngFor="let asg of at.assigner">
                                    <a class="nav-link p-0 dropdown-toggle dropdown-caret-none" data-toggle="tooltip" [title]="asg.name" data-placement="top">
                                      <div class="avatar avatar-xl">
                                        <img class="rounded-circle" src="{{asg.img}}" alt="" />
                                      </div>
                                    </a>
                                  </li>
                                </ul>
                              </td>
                              <td class="align-middle fs-0  text-center">
                                <span class="badge badge rounded-capsule badge-soft-{{at.statusColor}}">
                                  {{at.status}}
                                </span>
                              </td>
                              <td class="align-middle text-center">
                                <a class="nav-link cursor-pointer" *ngIf="at.note!=''" (click)="setNote(at.note)">
                                  <i class="far fa-sticky-note bold fs-18" *ngIf="at.note!=''"></i>
                                </a>
                                <div class="dropdown-menu dropdown-md px-0 py-3">
                                  <div class="media align-items-center px-3">
                                    <i class="far fa-edit"></i>
                                  </div>
                                </div>
                              </td>
                              <td class="align-middle white-space-nowrap">
                                <div class="dropdown text-sans-serif">
                                  <button class="btn btn-link text-600 dropdown-toggle btn-reveal mr-3"
                                          type="button" id="dropdown0"
                                          data-toggle="dropdown"
                                          data-boundary="html"
                                          aria-haspopup="true"
                                          aria-expanded="false">
                                    <span class="fas fa-ellipsis-h fs--1"></span>
                                  </button>
                                  <div class="dropdown-menu dropdown-menu-right border py-0"
                                       aria-labelledby="dropdown0">
                                    <div class="bg-white py-2">
                                      <a class="dropdown-item" href="javascript:void(0)" (click)="editActivity(at.id,'activity',at.leadId)">Edit</a>
                                      <div class="dropdown-divider"></div>
                                      <a class="dropdown-item text-danger" href="javascript:void(0)" (click)="modalDelete(at.id,'leadActivity','leadActivity',[],'leadActivity')">Delete</a>
                                      <!--(click)="changeStatus('leadActivity', at.id, -1)"-->
                                    </div>
                                  </div>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                        <table *ngIf="leadObj.activityObj?.length==0" class="w-100 text-center">
                          <tr>
                            <td colspan="14" class="p-2">
                              <p class="text-center bold-text font-size18px m-0">No data available</p>
                              <p class="text-center m-0 text-gray font-size13px">There is not data to show you right now</p>
                            </td>
                          </tr>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="tab-pane fade" id="tab-sales-people" role="tabpanel"
                   aria-labelledby="sales-people-tab">
                <div class="row">
                  <div class="col-sm-4 col-12">
                    <div class="form-grup">
                      <label for="owner">Owner</label>
                      <select id="owner" [(ngModel)]="leadObj.ownerObj.owner" name="owner" class="form-control" (change)="ownerChange(leadObj.ownerObj.owner)">
                        <option [ngValue]="0">Choose</option>
                        <option [ngValue]="own.id" *ngFor="let own of leadObj.ownerObj.ownerList" [disabled]="own.disabledOwner==1">{{own.name}}</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-2"></div>
                  <div class="col-sm-6 col-12 mt-3 mt-sm-0 ml-2 ml-sm-0">
                    <label>Co-assigner</label>
                    <ul class="nav avatar-group mb-0 ml-1 ml-sm-0">
                      <li class="nav-item dropdown" *ngFor="let asg of leadObj.ownerObj.assigner;let index = index">
                        <div class="nav-link p-0 dropdown-toggle dropdown-caret-none"
                             href="javascript:void(0)" data-toggle="dropdown">
                          <div class="avatar avatar-xl remove-asg">
                            <img class="rounded-circle" src="{{asg.img}}" alt="" />
                          </div>
                        </div>
                        <div class="dropdown-menu dropdown-md px-0 py-3">
                          <div class="media align-items-center px-3">
                            <div class="avatar avatar-2xl mr-2">
                              <img class="rounded-circle" src="{{asg.img}}" alt="" />
                            </div>
                            <div class="media-body">
                              <h6 class="mb-0">
                                <span class="stretched-link text-900">{{asg.name}}</span>
                              </h6>
                            </div>
                          </div>
                          <hr class="my-2" />
                          <a class="dropdown-item text-danger cursor-pointer" href="javascript:void(0)" (click)="assignerChange(index,asg,'remove')">Remove Member</a>
                        </div>
                      </li>
                      <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle dropdown-caret-none p-0 ml-n1"
                           data-toggle="dropdown">
                          <div class="avatar avatar-xl">
                            <div class="avatar-name rounded-circle avatar-button">
                              <span>
                                <span class="fas fa-plus"
                                      data-fa-trasnsform="grow-2"></span>
                              </span>
                            </div>
                          </div>
                        </a>
                        <div class="dropdown-menu dropdown-md">
                          <h6 class="dropdown-header py-0 px-3 mb-0">Select Member</h6>
                          <div class="dropdown-divider"></div>
                          <div class="px-3 mb-2">
                            <input class="form-control form-control-sm" type="search"
                                   placeholder="Search team member" [(ngModel)]="searchOwnAssginer" />
                          </div>
                          <ul class="list-unstyled">
                            <li *ngFor="let m of leadObj.ownerObj.assignerList | filter:searchOwnAssginer;let index=index" (click)="assignerChange(index,m,'add')" [ngClass]="{'disabledLi': m.disabledAssigner==1}">
                              <a class="media align-items-center text-decoration-none hover-200 py-1 px-3 cursor-pointer">
                                <div class="avatar avatar-xl mr-2">
                                  <img class="rounded-circle"
                                       src="{{m.img}}" alt="" />
                                </div>
                                <div class="media-body">
                                  <h6 class="mb-0">{{m.name}}</h6>
                                </div>
                              </a>
                            </li>
                          </ul>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="tab-pane fade" id="tab-proposals" role="tabpanel"
                   aria-labelledby="contact-proposals">
                <div class="card-header">
                  <div class="row align-items-center justify-content-between">
                    <div class="col-6 col-sm-auto d-flex align-items-center mr-0">
                      <div class="dataTables_filter d-sm-inline-block">
                        <input type="search" class="form-control" placeholder="Search" [(ngModel)]="searchProp">
                      </div>
                    </div>
                    <div class="col-6 col-sm-auto ml-auto text-right pl-0">
                      <div id="dashboard-actions">
                        <div class="btn-group" [hidden]="proposalCheckedList?.length==0">
                          <button class="btn dropdown-toggle btn-info mx-2" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <span class="fas fa-bars pt-1"></span>
                            <span class="d-none d-sm-inline-block">Action</span>
                          </button>
                          <div class="dropdown-menu dropdown-edit">
                            <a class="dropdown-item text-danger" href="javascript:void(0)" (click)="modalDelete(0,'','',['proposalStatus'],'leadProposalBulk')">Delete</a>
                          </div>
                        </div>
                        <div class="btn-group" [hidden]="proposalCheckedList?.length > 0">
                          <button class="btn  btn-success" type="button"
                                  (click)="editProposal(0,'proposal',leadObj.id)"
                                  id="ldProposalButtons">
                            <span class="fas fa-plus" data-fa-transform="shrink-3 down-2"></span>
                            <span class="d-none d-md-inline-block">
                              New
                              Proposal
                            </span>
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="card-body pt-0">
                  <div class="row">
                    <div class="col-12">
                      <div class="dashboard-data-table table-responsive">
                        <table class="table table-sm table-dashboard fs--1 data-table border-bottom">
                          <thead class="bg-200">
                            <tr>
                              <th class="no-sort pr-1 align-middle data-table-row-bulk-select">
                                <div class="custom-control custom-checkbox">
                                  <input class="custom-control-input"
                                         id="ldProposalBulk"
                                         type="checkbox"
                                         [(ngModel)]="proposalMasterSelected" (change)="proposalCheckUncheckAll()"
                                         [disabled]="leadObj.proposalObj?.length==0" />
                                  <label class="custom-control-label" for="ldProposalBulk"></label>
                                </div>
                              </th>
                              <th class="sort pr-1 align-middle text-left">
                                Title
                              </th>
                              <th class="sort pr-1 align-middle">
                                Date
                              </th>
                              <th class="sort pr-1 align-middle text-center">
                                Owner
                              </th>
                              <th class="sort pr-1 align-middle">
                                Amount
                              </th>
                              <th class="sort pr-1 align-middle text-center">
                                Status
                              </th>
                              <th class="no-sort pr-1 align-middle data-table-row-action">
                              </th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr class="btn-reveal-trigger" *ngFor="let pl of leadObj.proposalObj | filter:searchProp">
                              <td class="align-middle">
                                <div class="custom-control custom-checkbox">
                                  <input class="custom-control-input" type="checkbox" id="lPr{{pl.id}}" [(ngModel)]="pl.checkboxOpe" (change)="proposalIsAllSelected()" />
                                  <label class="custom-control-label" for="lPr{{pl.id}}"></label>
                                </div>
                              </td>
                              <td class="align-middle text-left bold-text">
                                <a href="javascript:void(0)" (click)="editProposal(pl.id,'proposal',leadObj.id)">
                                  {{pl.title}}
                                </a>
                              </td>
                              <td class="align-middle">
                                {{pl.date}}
                              </td>
                              <td class="align-middle  d-flex justify-content-center">
                                <ul class="nav avatar-group mb-0">
                                  <li class="nav-item dropdown">
                                    <a class="nav-link p-0 dropdown-toggle dropdown-caret-none" data-toggle="tooltip" [title]="pl.owner" data-placement="top">
                                      <div class="avatar avatar-xl">
                                        <img class="rounded-circle" src="{{pl.ownerImg}}" alt="{{pl.owner}}" />
                                      </div>
                                    </a>
                                  </li>
                                </ul>
                              </td>
                              <td class="align-middle">
                                $ {{pl.amount}}
                              </td>
                              <td class="align-middle fs-0  text-center">
                                <span class="badge badge rounded-capsule badge-soft-{{pl.statusColor}}">
                                  {{pl.status}}
                                </span>
                              </td>
                              <td class="align-middle white-space-nowrap">
                                <div class="dropdown text-sans-serif">
                                  <button class="btn btn-link text-600 dropdown-toggle btn-reveal mr-3"
                                          type="button" id="dropdown0"
                                          data-toggle="dropdown"
                                          data-boundary="html"
                                          aria-haspopup="true"
                                          aria-expanded="false">
                                    <span class="fas fa-ellipsis-h fs--1"></span>
                                  </button>
                                  <div class="dropdown-menu dropdown-menu-right border py-0"
                                       aria-labelledby="dropdown0">
                                    <div class="bg-white py-2">
                                      <a class="dropdown-item cursor-pointer" (click)="editProposal(pl.id,'proposal',leadObj.id)">Edit</a>
                                      <div class="dropdown-divider cursor-pointer">
                                      </div><a class="dropdown-item text-danger cursor-pointer" (click)="modalDelete(pl.id,'leadProposal','leadProposal',[],'leadProposal')">Delete</a>
                                    </div>
                                  </div>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                        <table *ngIf="leadObj.proposalObj?.length==0" class="w-100 text-center">
                          <tr>
                            <td colspan="14" class="p-2">
                              <p class="text-center bold-text font-size18px m-0">No data available</p>
                              <p class="text-center m-0 text-gray font-size13px">There is not data to show you right now</p>
                            </td>
                          </tr>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="tab-pane fade" id="tab-files" role="tabpanel" aria-labelledby="files-tab">
                <div id="dropzone" class="dropzone dropzone-multiple p-0" data-dropzone data-options='{"url":"Global/UploadFile/"}'>
                  <div class="fallback">
                    <input type="file" name="file2">
                  </div>
                  <div class="dz-message" data-dz-message> <img class="mr-2" src="../assets/img/icons/cloud-upload.svg" width="25" alt="">Drop your files here</div>
                  <div class="dz-preview dz-preview-multiple m-0 d-flex flex-column">
                  </div>
                </div>
              </div>
              <div class="tab-pane fade" id="tab-notes" role="tabpanel"
                   aria-labelledby="notes-tab">
                <div class="min-vh-15">
                  <textarea class="tinymce d-none" id="leadNote" name="content"></textarea>
                  <div class="col-lg-12 text-right"><span style="color: #989696;">5000</span></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" type="button" (click)="modalLeadClose()">Close</button>
        <button class="btn btn-primary" type="button" id="btnLeadSave"
                [disabled]="!leadObj.generalObj.opportunity || fileUploadOpe==0 || (emailCustomer.invalid && (emailCustomer.dirty || emailCustomer.touched))" (click)="saveLead()">
          Save changes
        </button>
      </div>
    </div>
  </div>
</div>
<!-- Modal Customer-->
<div class="modal fade mt-5 px-0" style="padding-left:0!important;padding-right:0!important" id="modalCustomer" tabindex="-1" role="dialog" aria-labelledby="modalCustomer" data-backdrop="static" data-keyboard="false"
     aria-hidden="true" (keydown.esc)="modalCustomerClose()">
  <div class="modal-dialog lead-customer-modal" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Customers List</h5>
        <button class="close" type="button" aria-label="Close" (click)="chooseCustomerOpeType(CustomerOpeTypeOld);modalCustomerClose()">
          <span class="font-weight-light" aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="card-header pt-0">
          <div class="row d-flex justify-content-end">
            <div class="col-8 p-0 d-flex justify-content-end">
              <div class="d-sm-inline-block">
                <input type="search" class="form-control" placeholder="Search" autocomplete="off" id="searchCustomer"
                       [(ngModel)]="searchCustomer" (input)="onSearchCustomer()" #focusInput />
              </div>
            </div>
          </div>
        </div>
        <div class="card-body pt-0 overflow-y-auto h-350px" (scroll)="onScroll($event)">
          <div class="row">
            <div class="col-12">
              <div class="dashboard-data-table table-responsive">
                <table class="table table-sm table-dashboard fs--1 data-table border-bottom"
                       data-options='{"responsive":false,"pagingType":"simple","lengthChange":false,"searching":false,"pageLength":8,"columnDefs":[{"targets":[0,6],"orderable":false}],"language":{"info":"_START_ to _END_ Items of _TOTAL_ — <a href=\"#!\" class=\"font-weight-semi-bold\"> view all <span class=\"fas fa-angle-right\" data-fa-transform=\"down-1\"></span> </a>"},"buttons":["copy","excel"]}'>
                  <thead class="bg-200">
                    <tr>
                      <th class="sort pr-1 align-middle w-6per">
                      </th>
                      <th class="sort pr-1 align-middle  w-20per">
                        Name
                      </th>
                      <th class="sort pr-1 align-middle text-start w-11per">
                        Company
                      </th>
                      <th class="sort pr-1 align-middle w-11per">
                        Email
                      </th>
                      <th class="sort pr-1 align-middle w-11per">
                        Phone
                      </th>
                      <th class="sort pr-1 align-middle w-11per">
                        Cell
                      </th>
                      <th class="sort pr-1 align-middle text-center w-30per">
                        Address
                      </th>
                    </tr>
                  </thead>
                  <tbody id="purchases">
                    <tr class="text-center" *ngIf="customerData.length==0">
                      <td colspan="9" class="p-4 text-gray">
                        <!--No customer searching-->
                        No customer found
                      </td>
                    </tr>
                    <tr class="btn-reveal-trigger cursor-pointer" *ngFor="let cus of customerData" (click)="checkboxSelectCustomer(cus.id,cus.ope)" [ngClass]="{'bg-gray':cus.ope==1}">
                      <td class="align-middle">
                        <div class="custom-control custom-checkbox custom-control-chek-div">
                          <input class="custom-control-input checkbox-bulk-select-target z-index10000" type="checkbox" style="z-index:10000;position:relative"
                                 id="checkbox-{{cus.id}}-{{cus.type}}" name="checkbox-group-customer" [(ngModel)]="cus.ope" />
                          <label class="custom-control-label custom-search-control"
                                 for="checkbox-{{cus.id}}-{{cus.type}}"></label>
                        </div>
                      </td>
                      <td class="align-middle">
                        <span *ngIf="cus.name!='' || cus.surname!=''">{{cus.name}} {{cus.surname}}</span>
                        <span *ngIf="cus.name=='' && cus.surname==''" class="text-table-no-data">No Name</span>
                      </td>
                      <td class="align-middle">
                        <span *ngIf="cus.company!=''">{{cus.company}}</span>
                        <span *ngIf="cus.company==''" class="text-table-no-data">No Company</span>
                      </td>
                      <td class="align-middle">
                        <span *ngIf="cus.email!=''">{{cus.email}}</span>
                        <span *ngIf="cus.email==''" class="text-table-no-data">No Email</span>
                      </td>
                      <td class="align-middle">
                        <span *ngIf="cus.phone!=''">{{cus.phone}}</span>
                        <span *ngIf="cus.phone==''" class="text-table-no-data">No Phone</span>
                      </td>
                      <td class="align-middle">
                        <span *ngIf="cus.cellPhone!=''"> {{cus.cellPhone}}</span>
                        <span *ngIf="cus.cellPhone==''" class="text-table-no-data"> No Phone</span>
                      </td>
                      <td class="align-middle text-center text-overflow">
                        <span *ngIf="cus.street!='' || cus.city!='' || cus.state!='' || cus.zip!=''">
                          {{cus.street}} {{cus.city}} {{cus.state}} {{cus.zip}}
                        </span>
                        <span *ngIf="cus.street=='' && cus.city=='' && cus.state=='' && cus.zip==''" class="text-table-no-data">No Address</span>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" type="button" data-dismiss="modal" (click)="chooseCustomerOpeType(CustomerOpeTypeOld);modalCustomerClose()">Close</button>
        <button class="btn btn-primary" type="button" [disabled]="checkCustomerDetail()" (click)="selectCustomer()">Select</button>
      </div>
    </div>
  </div>
</div>
<!-- Modal Proposal-->
<div class="modal fade z-index3000 px-0" style="padding-left:0!important;padding-right:0!important" id="modal_proposal" tabindex="-1" role="dialog" aria-labelledby="modal_proposal" data-backdrop="static" data-keyboard="false"
     aria-hidden="true" (keydown.esc)="modalProposalClose()">
  <div class="modal-dialog" role="document" style="max-width: 98%;">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Lead Proposal Details</h5>
        <button class="close" type="button" aria-label="Close" (click)="modalProposalClose()">
          <span class="font-weight-light" aria-hidden="true"
                id="X-modalProposal">&times;</span>
        </button>
      </div>
      <div class="modal-body overflow-y-auto max-height700px  bg-m-gray">
        <div class="card mb-3">
          <div class="card-body lead-propsal-card-padding" *ngIf="proposalObj.id!=0">
            <div>
              <span class="mr-2 fs-14">Status: </span>
              <div class="badge badge-pill badge-soft-{{proposalObj.statusColor}} fs--2">{{proposalObj.status}}</div>
            </div>
            <div>
              <span class="fs--1 position-relative top-5px">{{proposalObj.createDate}} {{proposalObj.user}}</span>
              <br class="d-block d-sm-none" />
              <button class="btn btn-falcon-success mr-1 mt-3 mt-sm-0 btn-sm float-right position-relative bottom-11px" type="button" *ngIf="proposalObj.id!=0 && proposalObj.approvedOpe==0" [disabled]="!proposalObj.title || disableButtons==1 || (proposalObj.discount!=0 && proposalObj.discountReason==0)" (click)="showSiqnatureModal()">
                <i class="fas fa-check position-relative top-2px"></i>
                <span class="ml-1 d-md-inline-block d-none">Approve</span>
              </button>
              <button class="btn btn-falcon-default mr-1 mt-3 mt-sm-0 btn-sm float-right position-relative bottom-11px" type="button" *ngIf="proposalObj.id!=0" [disabled]="!proposalObj.title || disableButtons==1 || (proposalObj.discount!=0 && proposalObj.discountReason==0)" (click)="openMailModal('proposal')">
                <i class="fas fa-envelope  position-relative top-2px"></i>
                <span class="ml-1 d-md-inline-block d-none">Send</span>
              </button>
              <button class="btn btn-falcon-default mr-1 mt-3 mt-sm-0 btn-sm float-right position-relative bottom-11px" id="printProposalBtn" type="button" *ngIf="proposalObj.id!=0" (click)="printProposal(proposalObj.id,proposalObj.leadId)">
                <i class="fas fa-print position-relative top-2px"></i>
                <span class="ml-1 d-md-inline-block d-none">Print</span>
              </button>
              <button class="btn btn-falcon-danger mr-1 mt-3 mt-sm-0 btn-sm float-right position-relative bottom-11px" type="button" *ngIf="proposalObj.id!=0  && proposalObj.statusId!=4" [disabled]="!proposalObj.title || disableButtons==1 || (proposalObj.discount!=0 && proposalObj.discountReason==0)" (click)="saveProposal('decline')">
                <i class="far fa-times-circle position-relative top-2px"></i>
                <span class="ml-1 d-md-inline-block d-none">Decline</span>
              </button>
            </div>
          </div>
        </div>
        <!--<ul class="nav nav-pills" id="pill-myTab" role="tablist">
          <li class="nav-item"><a class="nav-link active" id="pill-home-tab" data-toggle="tab" href="#pill-tab-home" role="tab" aria-controls="pill-tab-home" aria-selected="true">Home</a></li>
          <li class="nav-item"><a class="nav-link" id="pill-profile-tab" data-toggle="tab" href="#pill-tab-profile" role="tab" aria-controls="pill-tab-profile" aria-selected="false">Profile</a></li>
          <li class="nav-item"><a class="nav-link" id="pill-contact-tab" data-toggle="tab" href="#pill-tab-contact" role="tab" aria-controls="pill-tab-contact" aria-selected="false">Contact</a></li>
        </ul>
        <div class="tab-content border p-3 mt-3" id="pill-myTabContent">
          <div class="tab-pane fade show active" id="pill-tab-home" role="tabpanel" aria-labelledby="home-tab">Raw denim you probably haven't heard of them jean shorts Austin. Nesciunt tofu stumptown aliqua, retro synth master cleanse. Mustache cliche tempor, williamsburg carles vegan helvetica. Reprehenderit butcher retro keffiyeh dreamcatcher synth. Cosby sweater eu banh mi, qui irure terry richardson ex squid. Aliquip placeat salvia cillum iphone.</div>
          <div class="tab-pane fade" id="pill-tab-profile" role="tabpanel" aria-labelledby="profile-tab">Food truck fixie locavore, accusamus mcsweeney's marfa nulla single-origin coffee squid. Exercitation +1 labore velit, blog sartorial PBR leggings next level wes anderson artisan four loko farm-to-table craft beer twee. Qui photo booth letterpress, commodo enim craft beer mlkshk aliquip jean shorts ullamco ad vinyl cillum PBR. Homo nostrud organic. </div>
          <div class="tab-pane fade" id="pill-tab-contact" role="tabpanel" aria-labelledby="contact-tab">Etsy mixtape wayfarers, ethical wes anderson tofu before they sold out mcsweeney's organic lomo retro fanny pack lo-fi farm-to-table readymade. Messenger bag gentrify pitchfork tattooed craft beer, iphone skateboard locavore carles etsy salvia banksy hoodie helvetica. DIY synth PBR banksy irony. Leggings gentrify squid 8-bit cred pitchfork.</div>
        </div>-->
        <ul class="nav nav-pills" id="pill-myTab" role="tablist">
          <li class="nav-item"><a class="nav-link active" id="detail-tab" data-toggle="tab" href="#tab-detail" role="tab" aria-controls="tab-detail" aria-selected="true">Detail</a></li>
          <li class="nav-item" *ngIf="(proposalObj.pricingTemplateOpe && proposalObj.template!=0) || proposalObj.pricingOpe">
            <a class="nav-link"
               id="settings-tab" data-toggle="tab" href="#tab-settings" role="tab" aria-controls="tab-settings" aria-selected="false">Settings</a>
          </li>
          <li class="nav-item"><a class="nav-link" id="preview-tab" data-toggle="tab" href="#tab-preview" role="tab" aria-controls="tab-preview" aria-selected="false">Preview</a></li>
        </ul>
        <div class="tab-content mt-3" id="myTabContent">
          <div class="tab-pane fade show active" id="tab-detail" role="tabpanel" aria-labelledby="detail-tab">
            <div class="card mb-3">
              <div class="card-body">
                <div class="row">
                  <div class="col-lg-4 col-md-6 col-12">
                    <h5 class="mb-3 fs-0">Summary</h5>
                    <div class="row">
                      <div class="col-lg-12">
                        <div class="form-group" [ngClass]="{'invalid':!proposalObj.title}">
                          <label for="proposal-title">Proposal title</label>
                          <input class="form-control" id="proposal-title" type="text" [(ngModel)]="proposalObj.title" required="required" appTrimLeft>
                        </div>
                      </div>
                      <div class="col-md-6 col-12">
                        <div class="form-group">
                          <label for="proposal-date">Approval Deadline</label>
                          <input type="date" title="Approval Deadline" id="proposal-date" autocomplete="off" min="{{toDay}}" max="2199-01-01" class="form-control" [(ngModel)]="proposalObj.deadline">
                        </div>
                      </div>
                      <div class="col-md-6 col-12">
                        <div class="form-group" [ngClass]="{'invalid':proposalObj.template==0}">
                          <label for="proposal-template">Template</label>
                          <select id="proposal-template" title="Proposal Template" (change)="changeProposalTemplate(proposalObj.template)" [disabled]="proposalObj.id!=0" [(ngModel)]="proposalObj.template" name="proposal-template" class="form-control" required>
                            <option [ngValue]="0">Choose</option>
                            <option [ngValue]="tmplt.id" *ngFor="let tmplt of proposalObj.templateArray">{{tmplt.name}}</option>
                          </select>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-4  col-md-6  col-12">
                    <h5 class="mb-3 fs-0">Tax & Discount</h5>
                    <div class="row">
                      <div class="col-md-6 col-12">
                        <div class="form-group">
                          <label for="discount-wizard">Discount</label>
                          <div class="input-group mb-3">
                            <div class="input-group-prepend">
                              <span class="input-group-text input-group-text-symbol" style="font-size: 12px;">%</span>
                            </div>
                            <input class="form-control text-right" id="discount-wizard" name="discount-wizard" title="Discount Percent" (keyup)="calcTotals()" autocomplete="off" [(ngModel)]="proposalObj.discount" type="number" min="0" appCleanZero appPercentLimit>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6 col-12">
                        <div class="form-group" [ngClass]="{'invalid':proposalObj.discount!=0 && proposalObj.discountReason==0}">
                          <label for="reason-for-discount">Reason for discount</label>
                          <select id="reason-for-discount" title="Reason for discount" [(ngModel)]="proposalObj.discountReason"
                                  (change)="changeDiscountResultText(proposalObj.discountReason)" name="reason-for-discount" class="form-control">
                            <option [ngValue]="0">Choose</option>
                            <option [ngValue]="dr.id" *ngFor="let dr of proposalObj.discountReasonArray">{{dr.name}}</option>
                          </select>
                        </div>
                      </div>
                      <div class="col-lg-12">
                        <div class="form-group form-group">
                          <label for="tax-rate">Tax rate %</label>
                          <div class="input-group mb-3">
                            <div class="input-group-prepend">
                              <span class="input-group-text input-group-text-symbol" style="font-size: 12px;">%</span>
                            </div>
                            <input class="form-control text-right" id="tax-rate" name="tax-rate" title="Tax rate Percent" (keyup)="calcTotals()"
                                   autocomplete="off" [(ngModel)]="proposalObj.taxRate" type="number" min="0" appCleanZero appPercentLimit>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-4  col-md-12">
                    <!--<h5 class="mb-3 fs-0">Project Address</h5>
                    <div class="fs-18" *ngIf="proposalObj.addressShowOpe==1">{{proposalObj.projectAddress}}</div>
                    <div class="ml-2 color-no-data" *ngIf="proposalObj.addressShowOpe==0">No Address</div>-->
                    <h5 class="mb-3 fs-0">Additional Information </h5>
                    <div class="form-group">
                      <label for="proposal-note">Notes</label>
                      <textarea type="text" id="proposal-note" style="height: 119px" name="proposal-note" title="Proposal Notes" cols="30" rows="4" class="form-control" [(ngModel)]="proposalObj.note" appTrimLeft maxLength="1500"></textarea>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div id="accordion">
              <div class="accordion border-x border-top rounded mt-2" *ngFor="let step of proposalObj.steps;let index = index">
                <div class="card border-bottom">
                  <div class="card-header py-0" style="height:55px" id="heading{{index}}">
                    <!--<span class="fas fa-caret-right accordion-icon mr-3" data-fa-transform="shrink-2"></span>-->
                    <div class="fs--1 mt-2">
                      <div style="display: flex;justify-content: space-between;align-items: center;">
                        <a class="btn btn-link text-decoration-none btn-block py-2 px-0 text-left step-button"
                           data-toggle="collapse"
                           href="#collapse{{index}}"
                           aria-expanded="true"
                           aria-controls="collapse{{index}}">
                          <h5 class="text-left mb-0 text400">{{step.name}}</h5>
                        </a>
                        <div class="col-lg-4 col-md-6 col-8 text-right pr-0" *ngIf="step.factors.length!=0" [ngClass]="{'invalid':step.factorValue==0}">
                          <label for="proposal-template" class="mr-2 d-none d-md-inline-block text-dark">Multiplication Factors</label>
                          <select id="proposal-template" title="Proposal Template" [(ngModel)]="step.factorValue" (change)="changeFactor()" name="proposal-template"
                                  class="form-control d-inline-block w-50" required>
                            <option [ngValue]="0">Choose</option>
                            <option [ngValue]="factor.value" *ngFor="let factor of step.factors">{{factor.label}}</option>
                          </select>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="collapse"
                       id="collapse{{index}}"
                       aria-labelledby="heading{{index}}"
                       data-parent="#accordion">
                    <div class="card-body pt-2">
                      <div class="table-responsive fs--1">
                        <table class="table table-striped border-bottom">
                          <thead class="bg-200 text-900">
                            <tr>
                              <th class="border-0  min-w-700px">Products or Services</th>
                              <th class="border-0 text-right min-w-200px">Unit</th>
                              <th class="border-0 text-right min-w-200px"></th>
                              <th class="border-0 text-right min-w-50px">Visibility</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let detail of step.details;let detailIndex = index">
                              <td class="align-middle">
                                <h6 class="mb-0 text-nowrap">{{detail.itemName}}</h6>
                                <p class="mb-0">{{detail.itemDesc}}</p>
                              </td>
                              <td class="align-middle text-right">{{detail.unit}}</td>
                              <td class="align-middle text-right">
                                <div class="input-group mb-1" *ngIf="!detail.priceOnRequestOpe">
                                  <div class="input-group-prepend cursor-pointer" *ngIf="detail.calcOpe">
                                    <span class="input-group-text input-group-text-symbol"
                                          id="basic-addon1" style="font-size: 12px;" (click)="itemCalculate(index,detailIndex)"><i class="fas fa-calculator"></i></span>
                                  </div>
                                  <input class="form-control text-right" id="proposal-Qty{{detail.id}}" name="proposal-Qty{{detail.id}}" [(ngModel)]="detail.qty" (keyup)="calcTotals()" (change)="calcTotals()" title="Qty" autocomplete="off" appCleanZero type="number" min="0">
                                </div>
                                <div class="input-group mb-1" *ngIf="detail.priceOnRequestOpe">
                                  <div class="input-group-prepend cursor-pointer">
                                    <span class="input-group-text input-group-text-symbol" id="basic-addon1" style="font-size: 12px;"><i class="fas fa-dollar-sign"></i></span>
                                  </div>
                                  <input class="form-control text-right" id="proposal-Price{{detail.id}}" name="proposal-Price{{detail.id}}" [(ngModel)]="detail.price" (keyup)="calcTotals()" (change)="calcTotals()" title="Price" autocomplete="off" appCleanZero type="number" min="0">
                                </div>
                              </td>
                              <td class="align-middle text-right">
                                <div class="custom-control custom-checkbox cursor-pointer">
                                  <input class="custom-control-input cursor-pointer" id="visibleOpe{{detail.id}}" [(ngModel)]="detail.visibleOpe" (change)="showStepView()" type="checkbox" name="visibleOpe{{detail.id}}" required="required">
                                  <label class="custom-control-label cursor-pointer" for="visibleOpe{{detail.id}}">Show</label>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                        <div class="text-right" *ngIf="proposalObj.pricingOpe"><span>Total: ${{step.total}}</span></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="tab-pane fade" id="tab-settings" role="tabpanel" aria-labelledby="settings-tab">
            <div class="card p-sm-4 p-3" id="proposalTemplate">
              <div class="row">
                <div style="display:flex;justify-content:left">
                  <label>Show grouping prices :</label>
                  <div class="ml-2 custom-control custom-switch">
                    <input class="custom-control-input" type="checkbox" id="pricingOpe" [(ngModel)]="proposalObj.pricingOpe" />
                    <label class="custom-control-label cursor-pointer" for="pricingOpe"></label>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="tab-pane fade" id="tab-preview" role="tabpanel" aria-labelledby="preview-tab">
            <div class="card p-sm-4 p-3 ml-md-8  mr-md-8 ml-0 mr-0" id="proposalTemplate">
              <div class="row mb-5  position-relative">
                <div class="col-md-4 col-12">
                  <div class="img-proposal-logo">
                    <!--bunu print kommente hele sekil generate ede bilmir-->
                    <img src="{{proposalObj.logo}}" class="img-fluid" />
                  </div>
                </div>
                <div class="col-md-8 col-12 text-right">
                  <span class="bold-text font-size30px">Customer Poposal</span>
                  <br />
                  <span class="text-danger">* Offer guaranteed for 30 days</span>
                </div>
                <!--<span style="position:absolute;right: 27%;top: 95px;">
                  <img src="/Files/DefaultFiles/approve_stamp.png" style="width:250px" />
                  <b style="position: absolute; transform: rotate(316deg); top: 173px; left: 136px; left: 60px; font-size: 20px; color: #79BC58;">12/12/2020</b>
                </span>-->
                <span class="text-green border-green stamp" *ngIf="proposalObj.approvedOpe==1">
                  Approved
                  <span class="position-absolute stamp-date">
                    {{proposalObj.approvedDate}}
                  </span>
                </span>
                <span class="text-danger border-danger_  stamp" *ngIf="proposalObj.statusId==4">
                  Declined
                  <span class="position-absolute stamp-date">
                    {{proposalObj.declineDate}}
                  </span>
                </span>
              </div>
              <!--<div class="row mb-5">
                <div class="col-md-4 col-12 text-left">
                  <b>Customer:</b>
                  <span> {{proposalObj.customerName}}</span>
                </div>
                <div class="col-md-4  col-12 text-md-center text-left">
                  <b>Project Type:</b>
                  <span> {{proposalObj.projectType}}</span>
                </div>
                <div class="col-md-4 col-12 text-md-right text-left">
                  <b>Date:</b>
                  <span> {{proposalObj.date}}</span>
                </div>
              </div>-->
              <hr />
              <div class="row">
                <div class="col">
                  <b *ngIf="proposalObj.customerName">{{proposalObj.customerName}}</b>
                  <b *ngIf="!proposalObj.customerName">No customer name</b>
                  <br />
                  <p class="fs--1 text-500" *ngIf="proposalObj.customerStreet || proposalObj.customerCity || proposalObj.customerState || proposalObj.customerZip">{{proposalObj.customerStreet}} <br /> {{proposalObj.customerCity}} <span *ngIf="proposalObj.customerCity">,</span> {{proposalObj.customerState}}<br /> {{proposalObj.customerZip}}</p>
                  <p class="fs--1 text-500" *ngIf="!proposalObj.customerStreet && !proposalObj.customerCity && !proposalObj.customerState && !proposalObj.customerZip">No customer address</p>
                  <p class="fs--1" *ngIf="proposalObj.customerEmail && proposalObj.customerPhone">
                    <a href="mailto:{{proposalObj.customerEmail}}">{{proposalObj.customerEmail}}</a><br>
                    <a href="tel:{{proposalObj.customerPhone}}">{{proposalObj.customerPhone}}</a>
                  </p>
                </div>
                <div class="col-sm-auto ml-auto">
                  <div class="table-responsive">
                    <table class="table table-sm table-borderless fs--1">
                      <tbody>
                        <tr>
                          <th class="text-sm-right pl-0"> <b>Project Type:</b></th>
                          <td class="text-center ">
                            <span *ngIf="proposalObj.projectType">{{proposalObj.projectType}}</span>
                            <span *ngIf="!proposalObj.projectType">No Type</span>
                          </td>
                        </tr>
                        <tr>
                          <th class="text-sm-right pl-0"><b>Date:</b></th>
                          <td class="text-center"> <span> {{proposalObj.date}}</span></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-12 text-center mb-2">
                  <b>Products or Services Included but not limited to</b>
                </div>
              </div>
              <div class="table-responsive fs--1" *ngFor="let step of proposalObj.steps;let index = index">
                <table class="table table-striped border-bottom  mt-4" *ngIf="step.show">
                  <thead>
                    <tr class="bg-primary text-white" *ngIf="step.name">
                      <th class="border-0" colspan="3">{{step.name}}</th>
                      <th class="text-right" *ngIf="proposalObj.pricingOpe"><span>Total: ${{step.total}}</span></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let detail of step.details">
                      <td class="align-middle" colspan="4" *ngIf="detail.qty!=0 && !detail.priceOnRequestOpe && detail.visibleOpe">
                        <h6 class="mb-0 text-nowrap">{{detail.itemName}}<span class="mb-0" style="font-size:14px!important" *ngIf="detail.qtyOpe"> - {{detail.qty}} ({{detail.unit}})</span></h6>
                      </td>
                      <td class="align-middle" colspan="4" *ngIf="detail.price!=0 && detail.priceOnRequestOpe && detail.visibleOpe">
                        <h6 class="mb-0 text-nowrap">{{detail.itemName}}<span class="mb-0" style="font-size:14px!important" *ngIf="detail.qtyOpe"> - {{detail.price}} ({{detail.unit}})</span></h6>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="row">
                <div class="col-md-6 col-12 mb-5">
                  <div class="statistic-percent">
                    <p>Down Payment (20%) - <span>${{proposalObj.paymentOne}}</span></p>
                    <p>Project Measure (30%) - <span>${{proposalObj.paymentTwo}}}</span></p>
                    <p>Start of  Demolition (30%) - <span>${{proposalObj.paymentThree}}}</span></p>
                    <p>Balance Upon Completion (20%) - <span>${{proposalObj.paymentFour}}}</span></p>
                  </div>
                </div>
                <div class="col-md-6 col-12 mb-5">
                  <div class="row d-flex justify-content-end mr-1">
                    <div class="">
                      <!--col-8-->
                      <div class="text-right text-900">
                        Retail Price
                      </div>
                      <div class="text-right text-900">Discount</div>
                      <div class="text-right text-900" style="height:24px" *ngIf="proposalObj.discountReasonText!=''"> Reason for Discount</div>
                      <br />
                      <div class="text-right text-900">Subtotal</div>
                      <div class="text-right text-900">Sales tax</div>
                      <div class="text-right text-900">Tax amount</div>
                      <div class="text-right">
                        <b>Total Investement</b>
                      </div>
                    </div>
                    <div class="ml-2 text-right">
                      <!--col-4-->
                      <div class="font-weight-semi-bold">
                        $ {{proposalObj.retailPrice}}
                      </div>
                      <div class="font-weight-semi-bold">{{proposalObj.discount}}%</div>
                      <div class="font-weight-semi-bold" style="height:24px" *ngIf="proposalObj.discountReasonText!=''">{{proposalObj.discountReasonText}}</div>
                      <br />
                      <div class="font-weight-semi-bold">${{proposalObj.subTotal}}</div>
                      <div class="font-weight-semi-bold">{{proposalObj.taxRate}}%</div>
                      <div class="font-weight-semi-bold">${{proposalObj.taxAmount}}</div>
                      <div>${{proposalObj.total}}</div>
                    </div>
                  </div>
                </div>
              </div>
              <!--<div class="mb-5">
                <div class="mb-3" *ngFor="let step of proposalObj.steps;let index = index">
                  <div *ngIf="step.show">
                    <b>{{step.name}}</b>
                    <div *ngFor="let detail of step.details">
                      <div *ngIf="detail.qty!=0">
                        <p class="mb-0 p-0" *ngIf="detail.visibleOpe"> {{detail.itemName}}<span *ngIf="detail.qtyOpe"> - {{detail.qty}} ({{detail.unit}})</span></p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>-->
              <div class="row mb-5 px-3" *ngIf="proposalObj.note">
                <b>Notes :</b>
                <p>
                  {{proposalObj.note}}
                </p>
              </div>
              <div class="row">
                <div class="col-lg-6 col-sm-7 col-12">
                  <b>
                    Customer Signature : <span *ngIf="proposalObj.approvedOpe != 1">________________</span>
                    <span *ngIf="proposalObj.approvedOpe == 1"><img src="{{proposalObj.signatureImage}}" style="width:140px" /></span>
                  </b>
                </div>
                <div class="col-lg-6 col-sm-5 col-12 text-sm-right text-left" *ngIf="proposalObj.approvedOpe == 1">
                  <div style="margin-top:13px">
                    <b>Date :<span> {{proposalObj.approvedDate}}</span></b>
                  </div>
                </div>
                <div class="col-lg-6 col-sm-5 col-12 text-right" *ngIf="proposalObj.approvedOpe != 1">
                  <div>
                    <b>Date : <span>_________________</span></b>
                  </div>
                </div>
              </div>
            </div>
            <div id="proposalTemplatePrint">
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" type="button" (click)="modalProposalClose()">Close</button>
        <button class="btn btn-primary" type="button" [disabled]="!proposalObj.title || disableButtons==1 || proposalObj.template==0 || (proposalObj.discount!=0 && proposalObj.discountReason==0)" (click)="saveProposal('save')">Save</button>
      </div>
    </div>
  </div>
</div>
<!-- Modal Proposal Print Alert-->
<div class="modal fade mt-3 z-index5000" style="padding-left:0!important;padding-right:0!important;" id="modalProposalPrintWarning" tabindex="-1" role="dialog" aria-labelledby="modalProposalPrintWarning" data-backdrop="static" data-keyboard="true"
     aria-hidden="true">
  <div class="modal-dialog modal-proposal-print-warning-width" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Warning</h5>
        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
          <span class="font-weight-light" aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <span>Save proposal before printing</span>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" type="button" data-dismiss="modal">Ok</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Activity-->
<div class="modal fade z-index10000  px-0" style="padding-left:0!important;padding-right:0!important" id="modal_activity" tabindex="-1" role="dialog" aria-labelledby="modal_activity" data-backdrop="static" data-keyboard="false"
     aria-hidden="true" (keydown.esc)="modalActivityClose()">
  <div class="modal-dialog activity-modal-width" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Lead Activity Details</h5>
        <button class="close" type="button" aria-label="Close" id="X-ModalActivity" (click)="modalActivityClose()">
          <span class="font-weight-light" aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-12">
            <ul class="nav nav-tabs" id="myTab" role="tablist">
              <li class="nav-item f-xs-13">
                <a class="nav-link active" id="activity-general-tab"
                   data-toggle="tab" href="#tab-activity-general" role="tab"
                   aria-controls="tab-activity-general" aria-selected="true">
                  General
                </a>
              </li>
              <li class="nav-item f-xs-13">
                <a class="nav-link " id="acitvity-notes-tab"
                   data-toggle="tab" href="#tab-acitvity-notes" role="tab"
                   aria-controls="tab-acitvity-notes" aria-selected="true">Notes</a>
              </li>
              <li class="nav-item f-xs-13">
                <a class="nav-link " id="activity-format-tab1"
                   data-toggle="tab" href="#tab-activity-format" role="tab"
                   aria-controls="tab-activity-format" aria-selected="true">
                  Follow up activity
                </a>
              </li>
            </ul>
            <span class="form-check Worksheet-buttons check-completed">
              <input type="checkbox" class="form-check-input cursor-pointer" id="completed"
                     [ngModel]="activityObj.status == 2 ? true : activityObj.status == 1 ? false : null" (ngModelChange)="activityObj.status = $event ? 2 : 1">
              <label class="form-check-label label-completed" for="completed">Completed</label>
            </span>
            <div class="tab-content border-x border-bottom p-3" id="myTabContent">
              <div class="tab-pane fade show active" id="tab-activity-general" role="tabpanel" aria-labelledby="Worksheet-tab">
                <div class="row">
                  <div class="col-12">
                    <div class="form-group" [ngClass]="{'invalid':activityObj.activityTypeId==0}">
                      <label for="activty">Activity</label>
                      <select class="form-control" id="activty" name="project-type" [(ngModel)]="activityObj.activityTypeId" title="Activity" (change)="activityTypeChange(activityObj.activityTypeId,'activity')" required="required">
                        <option [ngValue]="0">Choose</option>
                        <option [ngValue]="at.id" *ngFor="let at of activityObj.activityTypeList">{{at.name}}</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-sm-6 col-12">
                    <div class="form-group">
                      <label for="begDate">Start date</label>
                      <input type="date" class="form-control" id="begDate" [(ngModel)]="activityObj.begDate" title="Start Date" min="" max="2099-01-01" (change)="activityDateChange(activityObj.begDate,'activity')" />
                    </div>
                  </div>
                  <div class="col-sm-6 col-12">
                    <div class="form-group">
                      <label for="begTime">Start time</label>
                      <input type="text" class="form-control" id="begTime" [disabled]="!activityObj.begDate" [(ngModel)]="activityObj.begTime" autocomplete="off">
                    </div>
                  </div>
                  <div class="col-sm-6 col-12">
                    <div class="form-group">
                      <label for="endDateDuration">Duration</label>
                      <select class="form-control" id="durationDay" [(ngModel)]="activityObj.durationDay">
                        <option [ngValue]="day.id" *ngFor="let day of durationDay">{{day.name}}</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-sm-3 col-12">
                    <div class="form-group">
                      <label for="endDateHours">Hours</label>
                      <select class="form-control" id="durationHour" [(ngModel)]="activityObj.durationHour">
                        <option [ngValue]="hour.id" *ngFor="let hour of durationHour">{{hour.name}}</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-sm-3 col-12">
                    <div class="form-group">
                      <label for="endDateMin">Min</label>
                      <select class="form-control" id="durationMinute" [(ngModel)]="activityObj.durationMinute">
                        <option [ngValue]="minute.id" *ngFor="let minute of durationMinute">{{minute.name}}</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-12">
                    <div class="form-group mb-0">
                      <label for="">Assigned Users</label>
                    </div>
                    <ul class="nav avatar-group mb-2">
                      <li class="nav-item dropdown" *ngFor="let asg of activityObj.assigner;let index = index">
                        <div class="nav-link p-0 dropdown-toggle dropdown-caret-none" href="javascript:void(0)" data-toggle="dropdown">
                          <div class="avatar avatar-xl remove-asg">
                            <img class="rounded-circle" src="{{asg.img}}" alt="" />
                          </div>
                        </div>
                        <div class="dropdown-menu dropdown-md px-0 py-3">
                          <div class="media align-items-center px-3">
                            <div class="avatar avatar-2xl mr-2">
                              <img class="rounded-circle" src="{{asg.img}}" alt="" />
                            </div>
                            <div class="media-body">
                              <h6 class="mb-0">
                                <span class="stretched-link text-900">{{asg.name}}</span>
                              </h6>
                            </div>
                          </div>
                          <hr class="my-2" />
                          <a class="dropdown-item text-danger cursor-pointer" href="javascript:void(0)" (click)="activityAssignerChange(index,asg,'remove')">Remove Member</a>
                        </div>
                      </li>
                      <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle dropdown-caret-none p-0 ml-n1"
                           data-toggle="dropdown">
                          <div class="avatar avatar-xl">
                            <div class="avatar-name rounded-circle avatar-button">
                              <span>
                                <span class="fas fa-plus"
                                      data-fa-trasnsform="grow-2"></span>
                              </span>
                            </div>
                          </div>
                        </a>
                        <div class="dropdown-menu dropdown-md">
                          <h6 class="dropdown-header py-0 px-3 mb-0">Select Member</h6>
                          <div class="dropdown-divider"></div>
                          <div class="px-3 mb-2">
                            <input class="form-control form-control-sm" type="search"
                                   placeholder="Search team member" [(ngModel)]="searchActAssigner" />
                          </div>
                          <ul class="list-unstyled">
                            <li *ngFor="let m of activityObj.assignerList |filter :searchActAssigner ;let index=index" (click)="activityAssignerChange(index,m,'add')" [ngClass]="{'disabledLi': m.disabledAssigner==1}">
                              <a class="media align-items-center text-decoration-none hover-200 py-1 px-3 cursor-pointer">
                                <div class="avatar avatar-xl mr-2">
                                  <img class="rounded-circle"
                                       src="{{m.img}}" alt="" />
                                </div>
                                <div class="media-body">
                                  <h6 class="mb-0">{{m.name}}</h6>
                                </div>
                              </a>
                            </li>
                          </ul>
                        </div>
                      </li>
                    </ul>
                  </div>
                  <div class="col-sm-6 col-12">
                    <div class="form-group">
                      <label for="endDateReminder">Reminder</label>
                      <select class="form-control" id="Reminder" [(ngModel)]="activityObj.reminder">
                        <option value="0">None</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>
              <div class="tab-pane fade" id="tab-acitvity-notes" role="tabpanel" aria-labelledby="acitvity-notes-tab1">
                <div class="row">
                  <div class="col-12">
                    <div class="form-group">
                      <textarea name="activityDescription" id="activityDescription" cols="30" rows="4" class="form-control description-style" [(ngModel)]="activityObj.description" maxLength="1500" appTrimLeft></textarea>
                    </div>
                  </div>
                </div>
              </div>
              <div class="tab-pane fade" id="tab-activity-format" role="tabpanel"
                   aria-labelledby="activity-format-tab">
                <div class="row">
                  <div class="col-12">
                    <div class="form-group">
                      <label for="activty">Activity</label>
                      <select class="form-control" id="activty" name="project-type" [(ngModel)]="activityObj.followUpActivityType" (change)="activityTypeChange(activityObj.followUpActivityType,'followUp')">
                        <option [ngValue]="0">Choose</option>
                        <option [ngValue]="at.id" *ngFor="let at of activityObj.activityTypeList">{{at.name}}</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-sm-6 col-12">
                    <div class="form-group">
                      <label for="followUpBegDate">Schedule Follow-Up</label>
                      <input type="date" class="form-control" id="followUpBegDate" min="{{activityObj.begDate}}" max="2099-01-01" [(ngModel)]="activityObj.followUpBegDate" (change)="activityDateChange(activityObj.followUpBegDate,'followUp')">
                    </div>
                  </div>
                  <div class="col-sm-6 col-12">
                    <div class="form-group" [ngClass]="{'invalid':activityObj.followUpBegDate && !activityObj.followUpBegTime}">
                      <label for="followUpBegTime">At</label>
                      <input type="time" class="form-control" id="followUpBegTime" [disabled]="!activityObj.followUpBegDate" [(ngModel)]="activityObj.followUpBegTime">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer justify-content-sm-between justify-content-end">
        <span class="ml-1 activity-crated-f-md-12 ">
          <span *ngIf="activityObj.createdBy!=0">Created {{activityObj.createDate}} by <i>{{activityObj.createdByName}}</i></span>
        </span>
        <span>
          <button class="btn btn-secondary mr-1 f-xs-13" type="button" id="closeModalActivity" (click)="modalActivityClose()">Close </button>
          <button class="btn btn-primary mr-1 f-xs-13" type="button" (click)="checkACtivity('saveNew',activityObj)" [disabled]="activityObj.activityTypeId==0 || (activityObj.begDate && (!activityObj.begTime)) || (activityObj.followUpBegDate && (!activityObj.followUpBegTime))">Save & New</button>
          <button class="btn btn-primary f-xs-13" type="button" (click)="checkACtivity('save',activityObj)"
                  [disabled]="activityObj.activityTypeId==0 || (activityObj.begDate && !activityObj.begTime)
                  || (activityObj.followUpBegDate && !activityObj.followUpBegTime)">
            Save  <span class="d-md-inline-block d-none">Changes</span>
          </button>
        </span>
      </div>
    </div>
  </div>
</div>

<!-- Modal Choose Activity-->
<div class="modal fade px-0" style="padding-left:0!important;padding-right:0!important" id="exampleModal3" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel3" data-keyboard="true"
     aria-hidden="true">
  <div class="modal-dialog" role="document" style="max-width: 50%;">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Customers List</h5>
        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
          <span class="font-weight-light" aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="card-header pt-0">
          <div class="row d-flex justify-content-end">
            <div class="col-8  p-0 d-flex justify-content-end">
              <div id="DataTables_Table_8_filter" class="dataTables_filter d-sm-inline-block">
                <input type="search" class="form-control form-control-sm"
                       placeholder="Search by name" aria-controls="DataTables_Table_8">
              </div>
            </div>
          </div>
        </div>
        <div class="card-body pt-0">
          <div class="row">
            <div class="col-12">
              <div class="dashboard-data-table table-responsive">
                <table class="table table-sm table-dashboard fs--1 data-table border-bottom"
                       data-options='{"responsive":false,"pagingType":"simple","lengthChange":false,"searching":false,"pageLength":8,"columnDefs":[{"targets":[0,3],"orderable":false}],"language":{"info":"_START_ to _END_ Items of _TOTAL_ — <a href=\"#!\" class=\"font-weight-semi-bold\"> view all <span class=\"fas fa-angle-right\" data-fa-transform=\"down-1\"></span> </a>"},"buttons":["copy","excel"]}'>
                  <thead class="bg-200">
                    <tr>
                      <th class="no-sort pr-1 align-middle data-table-row-bulk-select">
                        <div class="custom-control custom-checkbox">
                          <input class="custom-control-input checkbox-bulk-select"
                                 id="checkbox-bulk-purchases-select" type="checkbox"
                                 data-checkbox-body="#purchases"
                                 data-checkbox-actions="#purchases-actions"
                                 data-checkbox-replaced-element="#dashboard-actions" />
                          <label class="custom-control-label"
                                 for="checkbox-bulk-purchases-select"></label>
                        </div>
                      </th>
                      <th class="sort pr-1 align-middle">
                        Opportunity Title
                      </th>
                      <th class="sort pr-1 align-middle">
                        Date
                      </th>
                      <th class="sort pr-1 align-middle">
                        Customer
                      </th>
                    </tr>
                  </thead>
                  <tbody id="purchases">
                    <tr class="btn-reveal-trigger">
                      <td class="align-middle">
                        <div class="custom-control custom-checkbox">
                          <input class="custom-control-input checkbox-bulk-select-target" type="checkbox" id="checkbox-0" />
                          <label class="custom-control-label" for="checkbox-0"></label>
                        </div>
                      </td>
                      <th class="align-middle">
                        <a href="../pages/customer-details.html">
                          Sylvia Plath
                        </a>
                      </th>
                      <td class="align-middle">
                        john@gmail.com
                      </td>
                      <td class="align-middle">
                        Slick - Drag &amp; Drop Bootstrap Generator
                      </td>
                    </tr>
                    <tr class="btn-reveal-trigger">
                      <td class="align-middle">
                        <div class="custom-control custom-checkbox">
                          <input class="custom-control-input checkbox-bulk-select-target"
                                 type="checkbox" id="checkbox-0" />
                          <label class="custom-control-label"
                                 for="checkbox-0"></label>
                        </div>
                      </td>
                      <th class="align-middle">
                        <a href="../pages/customer-details.html">
                          Sylvia
                          Plath
                        </a>
                      </th>
                      <td class="align-middle">
                        john@gmail.com
                      </td>
                      <td class="align-middle">
                        Slick - Drag
                        &amp; Drop Bootstrap Generator
                      </td>
                    </tr>
                    <tr class="btn-reveal-trigger">
                      <td class="align-middle">
                        <div class="custom-control custom-checkbox">
                          <input class="custom-control-input checkbox-bulk-select-target"
                                 type="checkbox" id="checkbox-0" />
                          <label class="custom-control-label"
                                 for="checkbox-0"></label>
                        </div>
                      </td>
                      <th class="align-middle">
                        <a href="../pages/customer-details.html">
                          Sylvia
                          Plath
                        </a>
                      </th>
                      <td class="align-middle">
                        john@gmail.com
                      </td>
                      <td class="align-middle">
                        Slick - Drag
                        &amp; Drop Bootstrap Generator
                      </td>
                    </tr>
                    <tr class="btn-reveal-trigger">
                      <td class="align-middle">
                        <div class="custom-control custom-checkbox">
                          <input class="custom-control-input checkbox-bulk-select-target"
                                 type="checkbox" id="checkbox-0" />
                          <label class="custom-control-label"
                                 for="checkbox-0"></label>
                        </div>
                      </td>
                      <th class="align-middle">
                        <a href="../pages/customer-details.html">
                          Sylvia
                          Plath
                        </a>
                      </th>
                      <td class="align-middle">
                        john@gmail.com
                      </td>
                      <td class="align-middle">
                        Slick - Drag
                        &amp; Drop Bootstrap Generator
                      </td>
                    </tr>
                    <tr class="btn-reveal-trigger">
                      <td class="align-middle">
                        <div class="custom-control custom-checkbox">
                          ss
                          <input class="custom-control-input checkbox-bulk-select-target"
                                 type="checkbox" id="checkbox-0" />
                          <label class="custom-control-label"
                                 for="checkbox-0"></label>
                        </div>
                      </td>
                      <th class="align-middle">
                        <a href="../pages/customer-details.html">
                          Sylvia
                          Plath
                        </a>
                      </th>
                      <td class="align-middle">
                        john@gmail.com
                      </td>
                      <td class="align-middle">
                        Slick - Drag
                        &amp; Drop Bootstrap Generator
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" type="button" data-dismiss="modal">Close</button>
        <button class="btn btn-primary" type="button">Select</button>
      </div>
    </div>
  </div>
</div>

<!--Modal Note-->
<div class="modal modal-fixed-right fade z-index10000" id="modalNote" tabindex="-1" role="dialog" aria-labelledby="exampleModalRightLabel" aria-hidden="true" data-keyboard="true">
  <div class="modal-dialog modal-dialog-vertical bl-light" role="document">
    <div class="modal-content border-0 min-vh-100">
      <div class="modal-header">
        <h5 class="modal-title" id="modalNoteLabel">Activity Note</h5>
        <button class="close" type="button" data-dismiss="modal" aria-label="Close"><span class="font-weight-light" aria-hidden="true">&times;</span></button>
      </div>
      <div class="modal-body py-1 text-left">
        <p class="mt-3">{{note}}</p>
      </div>
    </div>
  </div>
</div>

<!-- Modal Confirmation-->
<div class="modal fade z-index10001 pr-0" style="padding-right:0!important" id="modalDelete" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
     data-backdrop="static" data-keyboard="false" aria-hidden="true" (keydown.esc)="modalDeleteClose(modalActionType)">
  <div class="modal-dialog modal-dialog-center" role="document">
    <div class="modal-content">
      <div class="modal-header bg-danger">
        <h5 class="modal-title text-white" id="exampleModalLabel">Delete</h5>
        <button class="close text-white" type="button" data-dismiss="modal" aria-label="Close" (click)="modalDeleteClose(modalActionType)"><span class="font-weight-light" aria-hidden="true">&times;</span></button>
      </div>
      <div class="modal-body">
        <p>Are you sure want to delete {{delCount}} item(s)?</p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary btn-sm" type="button" data-dismiss="modal" (click)="modalDeleteClose(modalActionType)">Cancel</button>
        <button class="btn btn-primary btn-sm" type="button" (click)="deleteItem(delId,delType,delType2,delBulkArray)">Yes</button>
      </div>
    </div>
  </div>
</div>

<!--Modal Filter Lead-->
<div class="modal fade px-0 overflow-auto z-index1042" id="modalLeadFilter" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" data-keyboard="true">
  <div class="modal-dialog lead-filter-modal" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">
          Filter your results
        </h5>
        <button class="close" type="button" data-dismiss="modal" aria-label="Close"><span class="font-weight-light" aria-hidden="true">&times;</span></button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-12">
            <h6 class="font-weight-bold">
              Please fill in the required fields for a more specific search
            </h6>
          </div>
          <div class="col-md-6 col-12">
            <div class="form-group">
              <label for="owner">
                Owner
              </label>
              <select class="selectpicker form-control" id="filteredDataowner" name="filteredDataowner" multiple [(ngModel)]="filteredDataOwners">
                <option [ngValue]="own.id" *ngFor="let own of filterModalData.ownerObj">{{own.name}}</option>
              </select>
            </div>
          </div>
          <div class="col-md-6 col-12">
            <div class="form-group">
              <label for="status">Status</label>
              <select class="selectpicker form-control" id="filteredDataStatuses" multiple [(ngModel)]="filteredDataStatuses">
                <option [ngValue]="sl.id" *ngFor="let sl of filterModalData.statusObj">{{sl.name}}</option>
              </select>
            </div>
          </div>
          <div class="col-md-6 col-12">
            <div class="form-group">
              <label for="projectType">Project type</label>
              <select class="selectpicker form-control" id="filteredDataProjects" multiple [(ngModel)]="filteredDataProjects">
                <option [ngValue]="pl.id" *ngFor="let pl of filterModalData.projectObj">{{pl.name}}</option>
              </select>
            </div>
          </div>
          <div class="col-md-6 col-12">
            <div class="form-group">
              <label for="source">Source</label>
              <select class="selectpicker form-control" id="filteredDataSources" multiple [(ngModel)]="filteredDataSources">
                <option [ngValue]="sl.id" *ngFor="let sl of filterModalData.sourceObj">{{sl.name}}</option>
              </select>
            </div>
          </div>
          <div class="col-md-4 col-12">
            <div class="form-group">
              <label for="FilterDate">Date</label>
              <select class="form-control" id="FilterDate" [(ngModel)]="dateFilterType" (change)="onChangeFilterDateType()">
                <option [value]="0">All dates</option>
                <option [value]="1">Custom range</option>
                <option [value]="2">Past 7</option>
                <option [value]="3">Past 14</option>
                <option [value]="4">Past 30</option>
                <option [value]="5">Past 60</option>
              </select>
            </div>
          </div>
          <div class="col-md-4 col-12" *ngIf="dateFilterType==1">
            <div class="form-group" [ngClass]="{'invalid':!filteredData.startDate}">
              <label for="multiple-select4">Start Date *</label>
              <input type="date" name="name" class="form-control" max="2099-01-01" min="" [(ngModel)]="filteredData.startDate" />
            </div>
          </div>
          <div class="col-md-4 col-12" *ngIf="dateFilterType==1">
            <div class="form-group" [ngClass]="{'invalid':!filteredData.endDate}">
              <label for="multiple-select4">End Date *</label>
              <input type="date" name="name" class="form-control" max="2099-01-01" min="{{filteredData.startDate}}" [(ngModel)]="filteredData.endDate" />
            </div>
          </div>
        </div>
        <div class="row" [hidden]="!filterModalData.filterObj">
          <div class="col-12">
            <h6 class="font-weight-bold">
              My filters
            </h6>
          </div>
        </div>
        <hr [hidden]="!filterModalData.filterObj" />
        <div class="row overflow-y-auto max-height300px" *ngIf="filterModalData.filterObj?.length!=0">
          <div class="col-12" style="min-height:100px">
            <div class="col-12 justify-content-center d-flex cursor-pointer" *ngFor="let f of filterModalData.filterObj">
              <div class="filters-item px-3 py-2 border-bottom w-100 d-flex flex-row justify-content-between align-items-center" [ngClass]="{'bg-gray':f.id==fid}">
                <span class="float-left  font-weight400 font-size14 w-sm-75 w-50" (click)="showSavedFiltersDetails(f.id)">
                  {{f.name}}
                </span>
                <span class="float-right">
                  <button class="btn btn-falcon-default btn-sm position-relative z-index1000"
                          type="button" title="Default" *ngIf="f.isDefault==1" data-toggle="tooltip" data-placement="bottom">
                    <span class="fas fa-star" data-fa-transform="shrink-3 down-2"></span>
                  </button>
                  <button class="btn btn-falcon-default btn-sm  cursor-pointer position-relative z-index1000 ml-2"
                          type="button" title="Edit" (click)="editLeadFilterName(f.id)" data-toggle="tooltip" data-placement="bottom">
                    <span class="fas fa-pencil-alt" data-fa-transform="shrink-3 down-2"></span>
                  </button>

                  <button class="btn btn-falcon-default btn-sm  cursor-pointer position-relative z-index1000  ml-2"
                          type="button" title="Delete" (click)="modalDelete(f.id,'filterStatus','',[],'')" data-toggle="tooltip" data-placement="bottom">
                    <span class="fas fa-trash-alt" data-fa-transform="shrink-3 down-2"></span>
                  </button>
                  <!--<i class="fas fa-star text-warning py-2 px-3 cursor-pointer position-relative z-index1000" *ngIf="f.isDefault==1"></i>
                  <i class="fas fa-pencil-alt ml-2 py-2 px-3 cursor-pointer position-relative z-index1000" (click)="editLeadFilterName(f.id)"></i>
                  <i class="fas fa-trash-alt ml-2 py-2 px-3 cursor-pointer position-relative z-index1000" (click)="modalDelete(f.id,'filterStatus','',[],'')"></i>-->
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" type="button" data-dismiss="modal">Close</button>
        <button class="btn btn-secondary" type="button" (click)="editLeadFilterName(0)"
                *ngIf="fid==0 && ((filteredDataOwnersChangeOpe && filteredDataOwnersChangeOpe!=0) || (filteredDataProjectsChangeOpe && filteredDataProjectsChangeOpe!=0)
                || (filteredDataSourcesChangeOpe  && filteredDataSourcesChangeOpe!=0) || (filteredDataStatusesChangeOpe && filteredDataStatusesChangeOpe!=0)
                || dateFilterType!=0)" [disabled]="dateFilterType==1 && (!filteredData.startDate || !filteredData.endDate)">
          Save Filter
        </button>
        <button class="btn btn-secondary" type="button" (click)="resetFilterSelect()">Reset</button>
        <button class="btn btn-primary" type="button" (click)="getLeadFilterResult()"
                [disabled]="dateFilterType==1 && (!filteredData.startDate  ||  !filteredData.endDate)">
          Get results
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Search Lead-->
<div class="modal fade mt-5 px-0" style="padding-left:0!important;padding-right:0!important" id="modalLeadSearch" tabindex="-1" role="dialog" aria-labelledby="modalLeadSearch" data-backdrop="static" data-keyboard="true"
     aria-hidden="true">
  <div class="modal-dialog activity-select-modal-width" role="document">
    <div class="modal-content h-550px">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Leads List</h5>
        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
          <span class="font-weight-light" aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="card-header pt-0">
          <div class="row d-flex justify-content-end">
            <div class="col-8 mr-1 d-flex justify-content-end">
              <div class="d-sm-inline-block">
                <input type="search" class="form-control" placeholder="Search" autocomplete="off" id="searchLeadTxt"
                       [(ngModel)]="searchLeadTxt" (input)="onSearchLead()" #focusInput />
              </div>
            </div>
          </div>
        </div>
        <div class="card-body pt-0 overflow-y-auto h-340" (scroll)="onScrollLeadSearch($event)">
          <div class="row">
            <div class="col-12">
              <div class="dashboard-data-table table-responsive">
                <table class="table table-sm table-dashboard fs--1 data-table border-bottom">
                  <thead class="bg-200">
                    <tr>
                      <th class="sort pr-1 align-middle f-xs-13" style="width:5%">
                      </th>
                      <th class="sort pr-1 align-middle f-xs-13" style="width:20%">
                        Oppurtunity Tittle
                      </th>
                      <th class="sort pr-1 align-middle text-center" style="width:20%">
                        Customer
                      </th>
                    </tr>
                  </thead>
                  <tbody id="purchases">
                    <tr class="text-center" *ngIf="LeadSearch.length==0">
                      <td colspan="9" class="p-4 text-gray">
                        <!--No customer searching-->
                        No lead found
                      </td>
                    </tr>
                    <tr class="btn-reveal-trigger cursor-pointer" *ngFor="let ld of LeadSearch" (click)="checkboxSelectLeadSearch(ld.id)" [ngClass]="{'bg-gray':ld.ope}">
                      <td class="align-middle">
                        <div class="custom-control custom-checkbox">
                          <input class="custom-control-input checkbox-bulk-select-target z-index10000" type="checkbox"
                                 id="checkbox-ld-{{ld.id}}" name="checkbox-group-customer" [(ngModel)]="ld.ope" />
                          <label class="custom-control-label"
                                 for="checkbox-ld-{{ld.id}}"></label>
                        </div>
                      </td>
                      <td class="align-middle">
                        {{ld.tittle}}
                      </td>
                      <td class="align-middle">
                        {{ld.name}}
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" type="button" data-dismiss="modal">Close</button>
        <button class="btn btn-primary" type="button" [disabled]="checkLeadDetail()" (click)="selectLead()">Select</button>
      </div>
    </div>
  </div>
</div>

<!--Modal Check Activity-->
<div class="modal fade z-index10000 px-0" id="modal_check_activity" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
     data-backdrop="static" data-keyboard="false" aria-hidden="true" style="padding-left:0!important;padding-right:0!important">
  <div class="modal-dialog modal-dialog-center" role="document">
    <div class="modal-content">
      <div class="modal-header bg-warning">
        <h5 class="modal-title text-white" id="exampleModalLabel">Warning</h5>
        <button class="close text-white" type="button" data-dismiss="modal" aria-label="Close">
          <span class="font-weight-light" aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>Time of the activity coincides with the time of another activity. Do you want to continue?</p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary btn-sm" type="button" data-dismiss="modal">Cancel</button>
        <button class="btn btn-primary btn-sm" type="button" [disabled]="disableButtons==1" (click)="saveActivity(activitySaveType)">Yes</button>
      </div>
    </div>
  </div>
</div>

<!--Modal Siqanture-->
<div class="modal fade z-index10000 px-0" id="modalSiqnature" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
     data-backdrop="static" data-keyboard="false" aria-hidden="true" style="padding-left:0!important;padding-right:0!important">
  <div class="modal-dialog modal-dialog-center h-200px" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Signature</h5>
        <button class="close" type="button" data-dismiss="modal" aria-label="Close" (click)="closeSignatureModal()">
          <span class="font-weight-light" aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body position-relative">
        <ng-signature-pad doneButtonText="Sign" clearButtonText="Clear" doneButtonClass="signature-Sign float-right btn btn-primary mt-2"
                          clearButtonClass="signature-Clear float-right btn btn-secondary mr-2 mt-2"
                          format="base64" width="400" height="150"
                          (done)="showSignature($event)">
        </ng-signature-pad>
        <span class="form-check mt-4 position-absolute approveSignature">
          <input type="checkbox" class="form-check-input cursor-pointer" id="approveSignature" [(ngModel)]="approveSignature" (change)="agreeCondition()">
          <label class="form-check-label label-completed" for="approveSignature">I approve  the valitidity of  <br /> this electronic signature</label>
        </span>
        <button class="btn btn-secondary position-absolute closeSignatureImagePosition" (click)="closeSignatureModal()">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Proposal Calculator-->
<div class="modal fade mt-5 px-0 z-index5000" id="modalProposalCalc" tabindex="-1" role="dialog" aria-labelledby="modalProposalCalc" data-backdrop="static" data-keyboard="true"
     aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Area Calculator</h5>
        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
          <span class="font-weight-light" aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row" *ngFor="let sqc of calcObj.details;let index = index;let first = first;let last = last">
          <div class="col-sm-4 col-12">
            <div class="form-group position-relative">
              <label for="height">Height (inch)</label>
              <input type="number" class="form-control" id="height" title="height" [(ngModel)]="sqc.height" onkeypress="return event.charCode >= 48" min="0" />
            </div>
          </div>
          <div class="col-sm-1"> <span class="calc-x-button" style="margin-bottom: 15px; font-weight: 700;">x</span></div>
          <div class="col-sm-4 col-12">
            <div class="form-group">
              <label for="length">Length</label>
              <input type="number" class="form-control" id="length" title="length" [(ngModel)]="sqc.length" onkeypress="return event.charCode >= 48" min="0" />
            </div>
          </div>
          <div class="col-sm-2 col-12 pt-sm-4 mb-2 mb-sm-0" *ngIf="last">
            <button class="btn btn-primary float-right float-sm-left" style="margin-top:3px" type="button" [disabled]="sqc.height==0 || sqc.length==0" (click)="addItemSquareDetail()"><i class="fas fa-plus"></i></button>
          </div>
          <div class="col-sm-2 col-12  pt-sm-4 mb-2 mb-sm-0" *ngIf="!last">
            <button class="btn btn-danger float-right float-sm-left" style="margin-top:3px" (click)="removeItemSquareDetail(index)"><i class="fas fa-trash-alt"></i></button>
          </div>
        </div>
        <div class="row mt-5">
          <div class="col-sm-6"></div>
          <div class="col-sm-6 pull-right">
            <div class="form-group">
              <div class="row">
                <div class="col-2 pt-1">
                  <div class="custom-control custom-checkbox pull-right">
                    <input class="custom-control-input" type="checkbox" id="lnftOpe" [(ngModel)]="calcObj.lnftOpe" (change)="calcObj.sqftOpe=false" [disabled]="getTotalSquare()==0" />
                    <label class="custom-control-label" for="lnftOpe">Lnft</label>
                  </div>
                </div>
                <div class="col-10">
                  <input class="form-control" id="lnft" title="lnft" value="{{getTotalLnft()}}" readonly />
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-6 col-5"></div>
          <div class="col-sm-6 col-7 pull-right">
            <div class="form-group">
              <div class="row">
                <div class="col-2 pt-1">
                  <div class="custom-control custom-checkbox pull-right">
                    <input class="custom-control-input" type="checkbox" id="sqftOpe" [(ngModel)]="calcObj.sqftOpe" (change)="calcObj.lnftOpe=false" [disabled]="getTotalSquare()==0" />
                    <label class="custom-control-label" for="sqftOpe">Sqft</label>
                  </div>
                </div>
                <div class="col-10">
                  <input class="form-control" id="sqft" title="sqft" value="{{getTotalSqft()}}" readonly />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" type="button" data-dismiss="modal">Close</button>
        <button class="btn btn-primary" type="button" [disabled]="getTotalSquare()==0 || (!calcObj.lnftOpe && !calcObj.sqftOpe)" (click)="applyItemSquare()">Apply</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Email-->
<div class="modal fade mt-3 z-index5000" style="padding-left:0!important;padding-right:0!important;" id="modalLeadEmail" tabindex="-1" role="dialog" aria-labelledby="modalLeadEmail" data-backdrop="static" data-keyboard="true"
     aria-hidden="true">
  <div class="modal-dialog modal-email-width" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">New message</h5>
        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
          <span class="font-weight-light" aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="card-body px-0 pt-0">
          <form>
            <div class="card-body p-0">
              <div class="border-bottom border-200">
                <input class="form-control border-0 outline-none px-card" id="email-to" type="email" [(ngModel)]="mailTo" name="mailTo" aria-describedby="email-to" placeholder="To" />
              </div>
              <input class="form-control border-0 outline-none px-card" id="email-subject" type="text" [(ngModel)]="mailSubject" name="mailSubject" aria-describedby="email-subject" placeholder="Subject" />
              <div class="min-vh-25">
                <textarea class="tinymce d-none" id="mailBody" name="mailBody"></textarea>
                <div class="col-lg-12 text-right"><span style="color: #989696;">Max. 5000 symbols</span></div>
              </div>
            </div>
          </form>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" type="button" data-dismiss="modal" [disabled]="disableButtons==1">Close</button>
        <button class="btn btn-primary" type="button" (click)="saveProposal('send')" [disabled]="disableButtons==1">Send</button>
      </div>
    </div>
  </div>
</div>

<!--Modal Save Lead Filter -->
<div class="modal fade z-index10000 px-0" id="saveLeadFilter" tabindex="-1" role="dialog" aria-labelledby="saveLeadFilter"
     data-backdrop="static" data-keyboard="false" aria-hidden="true" style="padding-left:0!important;padding-right:0!important">
  <div class="modal-dialog activity-leadFilter-width" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Saving Filter</h5>
        <button class="close" type="button" (click)="closeModalLeadFilter()">
          <span class="font-weight-light" aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-9">
            <div class="form-group" [ngClass]="{'invalid':!leadFilterSavedModalData.name}">
              <label for="leadFilterName">Filter name</label>
              <input type="text" name="Name" autocomplete="off" class="form-control" id="leadFilterName" [(ngModel)]="leadFilterSavedModalData.name" required="required" appTrimLeft />
            </div>
          </div>
          <div class="col-3">
            <span class="form-check default-filter-buttons check-completed mt-4">
              <input type="checkbox" class="form-check-input cursor-pointer" id="isDefault" [(ngModel)]="leadFilterSavedModalData.isDefault">
              <label class="form-check-label label-completed" for="isDefault">Make default</label>
            </span>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary btn-sm" type="button" (click)="closeModalLeadFilter()">Close</button>
        <button class="btn btn-primary btn-sm" type="button" [disabled]="!leadFilterSavedModalData.name" (click)="saveLeadFilter()">Save</button>
      </div>
    </div>
  </div>
</div>





